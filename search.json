[
  {
    "objectID": "about-pt.html",
    "href": "about-pt.html",
    "title": "Sobre mim",
    "section": "",
    "text": "English  Portugu√™s\nOi! Me chamo Bruno Mioto, sou bi√≥logo, atualmente fa√ßo doutorado em Ecologia de Ambientes Aqu√°ticos Continentais (PEA-UEM) e estudo filogeografia de peixes!\nTenho experi√™ncia com an√°lise de dados e cria√ß√£o de gr√°ficos, amo criar novos pacotes em R e trabalho como freelancer de visualiza√ß√£o de dados!\nVeja meu perfil de freelas aqui: Upwork\nE meu portif√≥lio aqui: Behance\nSempre busco levar a informa√ß√£o correta de forma mais simples √† sociedade."
  },
  {
    "objectID": "about-pt.html#educa√ß√£o",
    "href": "about-pt.html#educa√ß√£o",
    "title": "Sobre mim",
    "section": "Educa√ß√£o",
    "text": "Educa√ß√£o\nPrograma de Ecologia em Ambientes Aqu√°ticos Continentais (PEA-UEM) | Maring√° - PR Doutorado | 2021 - Presente\nPrograma de Ecologia em Ambientes Aqu√°ticos Continentais (PEA-UEM) | Maring√° - PR Mestrado | 2019 - 2021\nUniversidade Estadual de Maring√° (UEM) | Maring√° - PR Licenciatura | 2015 - 2019"
  },
  {
    "objectID": "about-pt.html#experi√™ncia",
    "href": "about-pt.html#experi√™ncia",
    "title": "Sobre mim",
    "section": "Experi√™ncia",
    "text": "Experi√™ncia\nNupgen (DBC/Nup√©lia UEM) - Laborat√≥rio de Gen√©tica MolecularAluno de doutorado | 2018 - Present\nGal√°pagos - Gr√°ficos e Mapas Diretor de Gr√°ficos | 2022 - Presente\nUpwork Freelancer | 2022 - Presente\nCursinho Volunt√°rio Renova√ß√£o Professor Volunt√°rio - Biologia | 2019 - Presente"
  },
  {
    "objectID": "about-pt.html#artigos-publicados",
    "href": "about-pt.html#artigos-publicados",
    "title": "Sobre mim",
    "section": "Artigos publicados",
    "text": "Artigos publicados\nThe first record of Centrocestus formosanus (Trematoda: Heterophyidae) in southern Brazil supported by molecular data - 2021\nJuliana Rosa Matias Ciccheto, Bruno Henrique Mioto Stabile, Thomaz Mansini Carrenho Fabrin, Alessandra Val√©ria de Oliveira, Ricardo Massato Takemoto, Rodrigo Junio da Gra√ßa\nMolecular evidence of new freshwater turtle blood flukes (Digenea: Spirorchiidae) in the intermediate snail host Biomphalaria occidentalis Paraense, 1981 in an urban aquatic ecosystem in Brazil - 2021\nJuliana Rosa Matias Ciccheto, Bruno Henrique Mioto Stabile, F√°bio Fermino, Thomaz Mansini Carrenho Fabrin, Alessandra Val√©ria de Oliveira, Ricardo Massato Takemoto, Rodrigo Junio da Gra√ßa\nCyanobacteria in an urban lake: hidden diversity revealed by metabarcoding - 2020\nThomaz Mansini Carrenho Fabrin, Bruno Henrique Mioto Stabile, Matheus Vieira da Silva, Susicley Jati, Liliana Rodrigues, Alessandra Val√©ria de Oliveira\nDivulga√ß√£o da ci√™ncia desde a sala de aula - 2020\nYasmin Rodrigues de Souza, Carolina Pedrozo do Nascimento, Melissa Prog√™nio da Silva, Gabriela Cassia Zanon Reinas, Edilaine Corr√™a Leite, Jo√£o Ot√°vio Santos Silva, B√°rbara Scorsim Arjona, Rejane Guimar√£es Melo, Bruno Henrique Mioto Stabile, Hugo Lima Kirsten, Renan Borges dos Reis, Matheus Henrique Ferreira Aleixo, Larissa Carrara Gon√ßalves, Fernanda Moreira Flor√™ncio, Aline Favaro Mendes, Alessandra Barbosa da Silva, Alfonso Pineda, Luzia Cleide Rodrigues"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Bruno Mioto",
    "section": "",
    "text": "Hello, this is my personal website!\nI‚Äôm a biologist and dataviz freelancer! Here you‚Äôll find pages about the Charts and R packages I made and some info about me.\nIf you want to support my work, buy me a coffee!"
  },
  {
    "objectID": "index.html#posts-in-english",
    "href": "index.html#posts-in-english",
    "title": "Bruno Mioto",
    "section": "Posts in English",
    "text": "Posts in English\n\n\n\n\n\n\n\n\n\n\nggplot2 101\n\n\n\n\n\n\nggplot2\n\n\ndataviz\n\n\n\n\n\n\nFeb 27, 2024\n\n\nBruno Mioto\n\n\n16 min\n\n\n\n\n\n\n\n\n\n\n\n\nDrawing waterlines with ggplot2 in R\n\n\n\n\n\n\nggplot2\n\n\ndataviz\n\n\nmaps\n\n\n\n\n\n\nFeb 1, 2023\n\n\nBruno Mioto\n\n\n5 min\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "index.html#posts-em-portugu√™s",
    "href": "index.html#posts-em-portugu√™s",
    "title": "Bruno Mioto",
    "section": "Posts em Portugu√™s",
    "text": "Posts em Portugu√™s\n\n\n\n\n\n\n\n\n\n\nIntrodu√ß√£o ao ggplot2\n\n\n\n\n\n\nggplot2\n\n\ndataviz\n\n\n\n\n\n\nJan 30, 2024\n\n\nBruno Mioto\n\n\n16 min\n\n\n\n\n\n\n\n\n\n\n\n\nMapeando as √°rvores de Maring√°-PR\n\n\n\n\n\n\nggplot2\n\n\ndataviz\n\n\nmaps\n\n\n\n\n\n\nDec 5, 2023\n\n\nBruno Mioto\n\n\n15 min\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "r-packages.html",
    "href": "r-packages.html",
    "title": "R packages",
    "section": "",
    "text": "reservatoriosBR downloads data from Brazilian reservoirs from the SAR-ANA and ONS platforms and organizes it into a structure for use in R!\nI am currently looking for volunteers to test the functions and data. If you can, get in touch!\nIf you use it in any work, cite it or let me know!\nYou can install it running:\n\nif(!requireNamespace(\"remotes\", quietly = TRUE)){\n    install.packages(\"remotes\")\n  }\nremotes::install_github(\"brunomioto/reservatoriosBR\")"
  },
  {
    "objectID": "r-packages.html#reservatoriosbr",
    "href": "r-packages.html#reservatoriosbr",
    "title": "R packages",
    "section": "",
    "text": "reservatoriosBR downloads data from Brazilian reservoirs from the SAR-ANA and ONS platforms and organizes it into a structure for use in R!\nI am currently looking for volunteers to test the functions and data. If you can, get in touch!\nIf you use it in any work, cite it or let me know!\nYou can install it running:\n\nif(!requireNamespace(\"remotes\", quietly = TRUE)){\n    install.packages(\"remotes\")\n  }\nremotes::install_github(\"brunomioto/reservatoriosBR\")"
  },
  {
    "objectID": "r-packages.html#futebolplotr",
    "href": "r-packages.html#futebolplotr",
    "title": "R packages",
    "section": "futebolplotR",
    "text": "futebolplotR\n\nThe goal of futebolplotR is to provide functions and geoms that help creating visualization of Brazilian soccer related analysis. It provides a ggplot2 geom that does the heavy lifting of plotting Brazilian soccer badges in high quality, with correct aspect ratio and possible transparency.\nThe futebolplotR contains emblems of the teams that have participated in the Brasileir√£o S√©rie A soccer league from 2003 to the present day. Other teams are also welcome!\nThis package can be used with data from brasileirao R package.\nThe code for this package was heavily based on nbaplotR with minor changes to support Brazilian soccer team badges.\nYou can install it running:\n\nif(!requireNamespace(\"remotes\", quietly = TRUE)){\n    install.packages(\"remotes\")\n  }\nremotes::install_github(\"brunomioto/reservatoriosBR\")"
  },
  {
    "objectID": "r-packages.html#worldclimdata",
    "href": "r-packages.html#worldclimdata",
    "title": "R packages",
    "section": "WorldClimData",
    "text": "WorldClimData\n\n \nWorldClimData presents a faster way to download WorldClim data using piggyback.\nYou can install it running:\n\nif(!requireNamespace(\"remotes\", quietly = TRUE)){\n    install.packages(\"remotes\")\n  }\nremotes::install_github(\"brunomioto/WorldClimData\")"
  },
  {
    "objectID": "r-packages.html#dnaplot",
    "href": "r-packages.html#dnaplot",
    "title": "R packages",
    "section": "DNAplot",
    "text": "DNAplot\n\n  \nThe DNAplot package provides a simple and customizable function to create aesthetically pleasing plots of DNA sequences. Each base is represented by a colored rectangle, allowing for easy visualization and analysis of sequence features.\nYou can install it running:\n\nif(!requireNamespace(\"remotes\", quietly = TRUE)){\n    install.packages(\"remotes\")\n  }\nremotes::install_github(\"brunomioto/DNAplot\")\n\n\nlibrary(DNAplot)\n\nsequence &lt;- \"ACTGAAGTA\"\n\nplot_dna(sequence)\n\n‚Ñπ Plotting 9 bases"
  },
  {
    "objectID": "r-packages.html#ggimprensa",
    "href": "r-packages.html#ggimprensa",
    "title": "R packages",
    "section": "ggimprensa",
    "text": "ggimprensa\n\nggimprensa brings themes from the main Brazilian newspapers for ggplot2.\nThis package was inspired by the ggthemes package.\nThe goal of this package is to help users to create more beautiful graphics in an easy and fast way.\nYou can install it running:\n\nif(!requireNamespace(\"remotes\", quietly = TRUE)){\n    install.packages(\"remotes\")\n  }\nremotes::install_github(\"brunomioto/ggimprensa\")\n\n\n\n\n\n\n\n\n\n\nG1 theme\n\n\n\n\n\n\n\nNexo theme\n\n\n\n\n\n\n\nPoder 360 theme"
  },
  {
    "objectID": "r-packages.html#more-packages-soon",
    "href": "r-packages.html#more-packages-soon",
    "title": "R packages",
    "section": "More packages soon‚Ä¶",
    "text": "More packages soon‚Ä¶"
  },
  {
    "objectID": "intro-ggplot2.html",
    "href": "intro-ggplot2.html",
    "title": "Introdu√ß√£o ao ggplot2",
    "section": "",
    "text": "Nessa aula vamos utilizar os seguintes pacotes:\n\ndplyr para manipula√ß√£o de dados\nggplot2 para criar gr√°ficos\nggpath para plotar imagens de uma forma bem mais f√°cil\npokemon para obter a tabela de pokemons em pt-br\n\nPara instalar os pacotes, utilizamos o seguinte script:\n\ninstall.packages(c(\"dplyr\", \"ggplot2\", \n                   \"ggpath\", \"pokemon\"))\n\nAgora que temos os pacotes instalados, √© s√≥ carreg√°-los.\n\nlibrary(dplyr)\nlibrary(pokemon)\nlibrary(ggplot2)\nlibrary(ggpath)"
  },
  {
    "objectID": "intro-ggplot2.html#pacotes-utilizados",
    "href": "intro-ggplot2.html#pacotes-utilizados",
    "title": "Introdu√ß√£o ao ggplot2",
    "section": "",
    "text": "Nessa aula vamos utilizar os seguintes pacotes:\n\ndplyr para manipula√ß√£o de dados\nggplot2 para criar gr√°ficos\nggpath para plotar imagens de uma forma bem mais f√°cil\npokemon para obter a tabela de pokemons em pt-br\n\nPara instalar os pacotes, utilizamos o seguinte script:\n\ninstall.packages(c(\"dplyr\", \"ggplot2\", \n                   \"ggpath\", \"pokemon\"))\n\nAgora que temos os pacotes instalados, √© s√≥ carreg√°-los.\n\nlibrary(dplyr)\nlibrary(pokemon)\nlibrary(ggplot2)\nlibrary(ggpath)"
  },
  {
    "objectID": "intro-ggplot2.html#os-dados",
    "href": "intro-ggplot2.html#os-dados",
    "title": "Introdu√ß√£o ao ggplot2",
    "section": "Os dados",
    "text": "Os dados\nPara criar nossos gr√°ficos, precisamos de um conjunto de dados.\n\npokemon_df &lt;- pokemon::pokemon_ptbr"
  },
  {
    "objectID": "intro-ggplot2.html#gr√°ficos",
    "href": "intro-ggplot2.html#gr√°ficos",
    "title": "Introdu√ß√£o ao ggplot2",
    "section": "Gr√°ficos",
    "text": "Gr√°ficos"
  },
  {
    "objectID": "intro-ggplot2.html#gr√°ficos-com-r-base",
    "href": "intro-ggplot2.html#gr√°ficos-com-r-base",
    "title": "Introdu√ß√£o ao ggplot2",
    "section": "Gr√°ficos com R base",
    "text": "Gr√°ficos com R base\nPodemos criar gr√°ficos com o R base, que √© bem simples mas permite visualiza√ß√µes r√°pidas.\nPodemos criar gr√°ficos de dispers√£o\n\nplot(altura ~ peso, data = pokemon_df)\n\n\n\n\n\n\n\n\nO problema come√ßa quando queremos deixar esses gr√°ficos mais bonitos\n\nplot(altura ~ peso, data = pokemon_df,\n     main = \"T√≠tulo\",\n     xlab = \"Massa (kg)\", ylab = \"Altura (m)\",\n     pch = 19, frame = FALSE)\nabline(lm(altura ~ peso, data = pokemon_df), col = \"blue\")\n\n\n\n\n\n\n\n\nIsso √© confuso e eu acho muito dif√≠cil de deixar qualquer gr√°fico assim mais bonito."
  },
  {
    "objectID": "intro-ggplot2.html#gr√°ficos-com-ggplot2",
    "href": "intro-ggplot2.html#gr√°ficos-com-ggplot2",
    "title": "Introdu√ß√£o ao ggplot2",
    "section": "Gr√°ficos com ggplot2",
    "text": "Gr√°ficos com ggplot2\nMas agora vamos conhecer o pacote ggplot2. Esse pacote foi a tese do Hadley Wickham, atual cientista-chefe da RStudio/Posit.\nA m√°gica aqui √© que esse pacote incorporou a gram√°tica de gr√°ficos (por isso o gg), que trouxe v√°rios fundamentos a serem seguidos. Um deles √© a cria√ß√£o de gr√°ficos por camadas, como se fosse uma pintura!\n{width = 50%}\nEsse pacote j√° est√° incluso no tidyverse e segue o mesmo princ√≠pio.\n\nlibrary(ggplot2)\n\nSe rodarmos s√≥ um ggplot(), teremos uma tela em branco.\n\nggplot()\n\n\n\n\n\n\n\n\nAgora temos que adicionar o nosso dataset e quais ser√£o nossos eixos.\nSempre que estivermos falando de uma vari√°vel do nosso dataset, temos que colocar dentro do argumento aes(), que significa aesthetics.\n\nggplot(data = pokemon_df,\n       aes(x = peso,\n           y = altura))\n\n\n\n\n\n\n\n\nInclusive, como o ggplot2 funciona em camadas, podemos usar da seguinte forma:\n\nggplot(data = pokemon_df)+\n  aes(x = peso,\n      y = altura)\n\n\n\n\n\n\n\n\nComo o ggplot2 faz parte do tidyverse, podemos falar para o R no imperativo: ‚ÄúPegue o dataset pokemon_df e ent√£o crie o ggplot‚Ä¶‚Äù. O bom dessa abordagem √© que, como o ggplot j√° sabe o dataset de antem√£o, ele nos ajuda a selecionar as vari√°veis (aperte tab antes de escrever as vari√°veis).\n\npokemon_df %&gt;% \n  ggplot(aes(x = peso,\n             y = altura))\n\n\n\n\n\n\n\n\nAgora temos nosso gr√°fico com os eixos delimitados, e podemos adicionar as camadas que quisermos. O princ√≠pio do ggplot √© parecido com o pipe, onde as informa√ß√µes s√£o passadas diretamente para a camada abaixo, assim n√£o precisamos adicionar os dados novamente.\n\nGeometrias\nAs geometrias s√£o fun√ß√µes que come√ßam por geom_*. Existem muitas e podemos ter uma ajudinha com a colinha do ggplot2.\nPrimeiro, vamos criar um gr√°fico de dispers√£o\n\npokemon_df %&gt;% \n  ggplot(aes(x = peso,\n             y = altura))+\n  geom_point()\n\n\n\n\n\n\n\n\nPara adicionar mais uma camada de geometria, √© s√≥ adicionar mais uma camada nessa pintura. Vamos adicionar uma linha de tend√™ncia com a fun√ß√£o geom_smooth().\n\npokemon_df %&gt;% \n  ggplot(aes(x = peso,\n             y = altura))+\n  geom_point()+\n  geom_smooth()\n\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n\n\n\n\n\n\n\n\n#podemos adicionar uma linha de tend√™ncia linear com o method = \"lm\"\n\nAqui podemos perceber como o ggplot2 funciona igual a uma pintura. Como o geom_smooth() foi chamado depois do geom_point(), ele √© plotado por cima.\nVamos ver o mesmo exemplo mas invertendo essas geometrias.\n\npokemon_df %&gt;% \n  ggplot(aes(x = peso,\n             y = altura))+\n  geom_smooth()+\n  geom_point()\n\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n\n\n\n\n\n\n\n\n#podemos adicionar uma linha de tend√™ncia linear com o method = \"lm\"\n\nVamos fazer um boxplot (utilizando a geometria geom_boxplot) do tipo do pokemon por altura\n\npokemon_df %&gt;% \n  ggplot(aes(x = tipo_1, y = peso))+\n  geom_boxplot()\n\n\n\n\n\n\n\n\nAgora vamos fazer um gr√°fico de colunas (utilizando a geometria geom_col() do peso dos pokemons.\n\npokemon_df %&gt;% \n  ggplot(aes(x = pokemon, y = peso))+\n  geom_col()\n\n\n\n\n\n\n\n\nMas n√≥s temos muitos dados, vamos selecionar s√≥ alguns para plotar.\n\niniciais &lt;- pokemon_df %&gt;% \n  filter(id %in% 1:9)\n\nVamos testar!\n\niniciais %&gt;% \n  ggplot(aes(x = pokemon, y = ataque))+\n  geom_col()\n\n\n\n\n\n\n\n\nPodemos inverter os eixos, √© s√≥ mudar. Inclusive com textos grandes, √© mais indicado eles ficarem no eixo y.\n\niniciais %&gt;% \n  ggplot(aes(x = ataque, y = pokemon))+\n  geom_col()\n\n\n\n\n\n\n\n\nOs pokemons n√£o est√£o na ordem que gostar√≠amos (como no dataset), est√£o em ordem alfab√©tica. Ent√£o temos que orden√°-los pela id, mas para serem ordenados precisamos consider√°-los como fatores.\n\niniciais2 &lt;- iniciais %&gt;% \n  mutate(pokemon = reorder(pokemon, id))\n\nVamos ver se funcionou usando a fun√ß√£o glimpse() (significa espiadinha do dplyr). Perceba a classe de cada vari√°vel entre &lt;...&gt;\n\nglimpse(iniciais2)\n\nRows: 9\nColumns: 22\n$ id              &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9\n$ pokemon         &lt;fct&gt; bulbasaur, ivysaur, venusaur, charmander, charmeleon, ‚Ä¶\n$ id_especie      &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9\n$ altura          &lt;dbl&gt; 0.07, 0.10, 0.20, 0.06, 0.11, 0.17, 0.05, 0.10, 0.16\n$ peso            &lt;dbl&gt; 0.69, 1.30, 10.00, 0.85, 1.90, 9.05, 0.90, 2.25, 8.55\n$ exp_base        &lt;dbl&gt; 64, 142, 236, 62, 142, 240, 63, 142, 239\n$ tipo_1          &lt;chr&gt; \"grama\", \"grama\", \"grama\", \"fogo\", \"fogo\", \"fogo\", \"√°g‚Ä¶\n$ tipo_2          &lt;chr&gt; \"venenoso\", \"venenoso\", \"venenoso\", NA, NA, \"voador\", ‚Ä¶\n$ hp              &lt;dbl&gt; 45, 60, 80, 39, 58, 78, 44, 59, 79\n$ ataque          &lt;dbl&gt; 49, 62, 82, 52, 64, 84, 48, 63, 83\n$ defesa          &lt;dbl&gt; 49, 63, 83, 43, 58, 78, 65, 80, 100\n$ ataque_especial &lt;dbl&gt; 65, 80, 100, 60, 80, 109, 50, 65, 85\n$ defesa_especial &lt;dbl&gt; 65, 80, 100, 50, 65, 85, 64, 80, 105\n$ velocidade      &lt;dbl&gt; 45, 60, 80, 65, 80, 100, 43, 58, 78\n$ cor_1           &lt;chr&gt; \"#78C850\", \"#78C850\", \"#78C850\", \"#F08030\", \"#F08030\",‚Ä¶\n$ cor_2           &lt;chr&gt; \"#A040A0\", \"#A040A0\", \"#A040A0\", NA, NA, \"#A890F0\", NA‚Ä¶\n$ cor_final       &lt;chr&gt; \"#81A763\", \"#81A763\", \"#81A763\", NA, NA, \"#DE835E\", NA‚Ä¶\n$ grupo_ovo_1     &lt;chr&gt; \"monster\", \"monster\", \"monster\", \"monster\", \"monster\",‚Ä¶\n$ grupo_ovo_2     &lt;chr&gt; \"plant\", \"plant\", \"plant\", \"dragon\", \"dragon\", \"dragon‚Ä¶\n$ url_icone       &lt;chr&gt; \"//archives.bulbagarden.net/media/upload/7/7b/001MS6.p‚Ä¶\n$ url_imagem      &lt;chr&gt; \"https://raw.githubusercontent.com/HybridShivam/Pokemo‚Ä¶\n$ id_geracao      &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1\n\n\nOlha como ficou ordenado agora!\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon))+\n  geom_col()\n\n\n\n\n\n\n\n\nEst√£o faltando cores nesses gr√°ficos!\nAgora vamos utilizar os argumentos color e fill. Quando a forma for s√≥lida, utilizamos apenas o color, se tiver contorno e preenchimento, utilizamos o colore fill, respectivamente.\nPodemos colorir de acordo com qualquer vari√°vel, nesse caso vamos colorir por tipo!\nVeja que podemos determinar a vari√°vel na fun√ß√£o ggplot() e ela servir√° para todas as seguintes. Se quisermos aplicar a uma camada apenas, colocamos apenas nela.\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col()\n\n\n\n\n\n\n\n\nAgora podemos adicionar o contorno. Como ele n√£o √© uma vari√°vel (√© uma cor fixa), n√£o precisa ir dentro do aes()\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")\n\n\n\n\n\n\n\n\n\n\nLabels\nTodo gr√°fico pode ter t√≠tulo, subt√≠tulo, titulo dos eixos, etc.\nTudo isso pode ser determinado utilizando a fun√ß√£o labs() dentro do ggplot. Perceba que a legenda √© criada de acordo com a vari√°vel fill, por isso o t√≠tulo da legenda seguir√° essa vari√°vel.\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  labs(\n    title = \"Os pokemons iniciais\",\n    subtitle = \"Separados por tipo\",\n    caption = \"Bruno Mioto\",\n    x = \"Ataque\",\n    y = \"Pokemon\",\n    fill = \"Tipo\"\n  )\n\n\n\n\n\n\n\n\n\n\nEscalas\nE se quisermos editar as escalas? Nesse caso vamos utilizar o conjunto de fun√ß√µes scale_*.\nVamos editar o eixo X. As quebras est√£o de 20 em 20, vamos colocar de 10 em 10. Como o eixo x √© cont√≠nuo, vamos usar a fun√ß√£o scale_x_continuous(). O argumento breaks nos ajuda com essa tarefa!\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_x_continuous(breaks = seq(0,200,10))\n\n\n\n\n\n\n\n\nAs cores tamb√©m podem ser definidas pela fun√ß√£o scale_*. Essas cores n√£o s√£o exatamente as que queremos, podemos definir manualmente usando a fun√ß√£o scale_fill_manual().\nComo as cores est√£o definidas de acordo com o tipo, vamos usar elas como base. O pr√≥prio dataset traz as cores para cada tipo. Para o tipo fogo usaremos a cor #F08030‚óâ, para o tipo grama usaremos a cor #78C850‚óâ e para o tipo √°gua usaremos a cor #6890F0‚óâ.\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\",\n      \"√°gua\" = \"#6890F0\"\n    )\n  )\n\n\n\n\n\n\n\n\nAl√©m de determinar as cores, tamb√©m podemos determinar as labels que cada cor ter√° na legenda. Vamos fazer isso dentro da fun√ß√£o scale tamb√©m, mas com o argumento labels.\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\",\n      \"√°gua\" = \"#6890F0\"\n    ),\n    labels = c(\n      \"fogo\" = \"Fogo\",\n      \"grama\" = \"Grama\",\n      \"√°gua\" = \"√Ågua\"\n    )\n  )\n\n\n\n\n\n\n\n\n\n\nTemas\nMas esses gr√°ficos n√£o est√£o t√£o bonitos ainda, podemos editar qualquer coisa dos gr√°ficos, desde a cor do fundo at√© a fonte.\nO ggplot2 j√° tem alguns temas pr√© definidos. Vamos testar\nEssa √© a theme_bw()\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\",\n      \"√°gua\" = \"#6890F0\"\n    )\n  )+\n  theme_bw()\n\n\n\n\n\n\n\n\nEu gosto bastante da theme_classic()\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\",\n      \"√°gua\" = \"#6890F0\"\n    )\n  )+\n  theme_classic()\n\n\n\n\n\n\n\n\nO theme_minimal() tamb√©m √© muito utilizado.\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n     \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\",\n      \"√°gua\" = \"#6890F0\"\n    )\n  )+\n  theme_minimal()\n\n\n\n\n\n\n\n\nO tema theme_void() mant√©m apenas as geometrias do gr√°fico gerado.\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n     \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\",\n      \"√°gua\" = \"#6890F0\"\n    )\n  )+\n  theme_void()\n\n\n\n\n\n\n\n\nMas podemos editar qualquer coisa dentro do tema escolhido tamb√©m. Essas fun√ß√µes s√£o apenas configura√ß√£o pr√©-determinadas.\nA maioria das configura√ß√µes podem ser vistas neste site. Para mudar as configura√ß√µes do tema, adicionamos os argumentos na fun√ß√£o theme()\nVamos eliminar o nome dos eixos\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\",\n      \"√°gua\" = \"#6890F0\"\n    )\n  )+\n  theme(\n    axis.title = element_blank()\n  )\n\n\n\n\n\n\n\n\nOu mudar o fundo do gr√°fico. Perceba que temos plot (o gr√°fico total) e panel (apenas o painel entre os eixos)\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n     \"fogo\" = \"#F08030\",\n     \"grama\" = \"#78C850\",\n     \"√°gua\" = \"#6890F0\"\n    )\n  )+\n  theme(\n    plot.background = element_rect(fill = \"pink\"),\n    panel.background = element_rect(fill = \"yellow\")\n  )\n\n\n\n\n\n\n\n\nVamos mudar as linhas de grade!\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\",\n      \"√°gua\" = \"#6890F0\"\n    )\n  )+\n  theme(\n    plot.background = element_rect(fill = \"pink\"),\n    panel.background = element_rect(fill = \"yellow\",\n                                    color = \"blue\"),\n    panel.grid.major = element_line(color = \"green\"),\n    panel.grid.major.x = element_line(linetype = \"dashed\"),\n    panel.grid.minor.x = element_line(color = \"black\")\n  )\n\n\n\n\n\n\n\n\nMeu Deus! O gr√°fico n√£o ficou bonito, mas ficou did√°tico! (Mas nunca fa√ßa algo assim de verdade, por favor)"
  },
  {
    "objectID": "intro-ggplot2.html#facetas",
    "href": "intro-ggplot2.html#facetas",
    "title": "Introdu√ß√£o ao ggplot2",
    "section": "Facetas",
    "text": "Facetas\nMuitas vezes temos muitas informa√ß√µes para mostrar em apenas um gr√°fico. Para isso podemos utilizar a ideia de pequenos m√∫ltiplos com a fun√ß√£o facet_wrap()!\n\npokemon_df %&gt;% \n  ggplot(aes(x = ataque, \n             y = defesa, \n             color = id_geracao))+\n  geom_point()+\n  facet_wrap(.~id_geracao)\n\n\n\n\n\n\n\n\nNesse caso o ggplot interpretou a coluna id_geracao como num√©rica cont√≠nua. Mas nesse caso cada gera√ß√£o √© independente de outra. Podemos dizer para o ggplot2 interpretas essa vari√°vel como fator.\n\npokemon_df %&gt;% \n  ggplot(aes(x = ataque, \n             y = defesa, \n             color = factor(id_geracao)))+\n  geom_point()+\n  facet_wrap(.~factor(id_geracao))\n\n\n\n\n\n\n\n\nPodemos usar as facetas com outros dados tamb√©m.\n\npokemon_df %&gt;% \n  ggplot(aes(x = ataque, \n             y = defesa, \n             color = tipo_1))+\n  geom_point()+\n  facet_wrap(.~tipo_1)"
  },
  {
    "objectID": "intro-ggplot2.html#plotar-imagens",
    "href": "intro-ggplot2.html#plotar-imagens",
    "title": "Introdu√ß√£o ao ggplot2",
    "section": "Plotar imagens",
    "text": "Plotar imagens\nSe quisermos colocar figuras nos nosso gr√°ficos, a melhor indica√ß√£o √© usar o pacote ggpath. Essa √© melhor forma de plotar imagens!\nPara isso vamos utilizar a fun√ß√£o geom_from_path(). S√≥ precisamos informar qual √© a coluna com o caminho para a figura.\nUma sugest√£o √© colocar o argumento da largura width como 0.1 pois as figuras podem ficar gigantes!\n\nlibrary(ggpath)\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  geom_from_path(aes(path = url_imagem),\n                 width = 0.1)+\n  scale_fill_manual(\n    values = c(\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\",\n      \"√°gua\" = \"#6890F0\"\n    )\n  )\n\n\n\n\n\n\n\n\n\nGr√°fico finalizado\nCom coment√°rios!\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  #adiciona colunas\n  geom_col(color = \"black\",\n           width = 0.5)+\n  #adiciona nomes\n  geom_text(aes(label = pokemon,\n                color = tipo_1),\n            x = 1,\n            hjust = 0,\n            nudge_y = 0.45,\n            fontface = \"bold\")+\n  #adiciona figuras\n  geom_from_path(aes(path = url_imagem),\n                 width = 0.1,\n                 hjust = 0)+\n  #adiciona linha vertical\n  geom_vline(xintercept = 0)+\n  #expande eixo x\n  scale_x_continuous(\n    expand = expansion(mult = c(0,0.1))\n  )+\n  #edita cores (vai afetar o texto que usa color)\n  scale_color_manual(\n    values = c(\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\",\n      \"√°gua\" = \"#6890F0\"\n    )\n  )+\n  #edita cores (vai afetar a coluna que usa fill)\n  scale_fill_manual(\n    values = c(\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\",\n      \"√°gua\" = \"#6890F0\"\n    )\n  )+\n  #edita labs\n  labs(\n    x = \"Ataque\",\n    caption = \"Bruno Mioto - @BrunoHMioto\"\n  )+\n  #usa tema inicial\n  theme_classic()+\n  #edita tema\n  theme(\n    #remover toda a legenda\n    legend.position = \"none\",\n    #remove t√≠tulo do eixo y\n    axis.title.y = element_blank(),\n    #remove texto do eixo y\n    axis.text.y = element_blank(),\n    #remove ticks\n    axis.ticks = element_blank(),\n    #remove eixos\n    axis.line = element_blank(),\n    #adiciona linha de grade - major\n    panel.grid.major.x = element_line(),\n    #adiciona linha de grade pontilhada - minor\n    panel.grid.minor.x = element_line(linetype = \"dashed\"),\n    #aumenta as margens do gr√°fico\n    plot.margin = margin(10,10,10,10,\"pt\"),\n    #muda a cor do fundo do gr√°fico\n    plot.background = element_rect(fill = \"#f1f1f1\", color = NA),\n    #muda a cor do fundo do painel\n    panel.background = element_rect(fill = \"#f1f1f1\", color = NA),\n  )+\n  #n√£o corta as imagens que saem do painel\n  coord_cartesian(\n    clip = \"off\"\n  )\n\n\n\n\n\n\n\n#salva o gr√°fico\n#ggsave(\"figures/grafico_final.png\", width = 8, height = 6)"
  },
  {
    "objectID": "posts/waterlines/en/index.html#motivation",
    "href": "posts/waterlines/en/index.html#motivation",
    "title": "Drawing waterlines with ggplot2 in R",
    "section": "Motivation",
    "text": "Motivation\n\nLast week I saw that Thomas Lin Pedersen (currently responsible for ggplot2) has started developing a new package called boundaries. It did not take me much effort to understand the main function of the package, because this amazing hex logo explains it very well, to create waterlines from boudaries!\nBut this is a package from the new euclid ecosystem, which aims to ‚Äúprovide a new unified foundation for computational geometry in R‚Äù. Awesome, but at that moment I wanted to know if I could create the waterlines for any shapefile I find on my computer, and the boundaries package doesn‚Äôt support sf objects, which I use to create maps‚Ä¶\nAnd so, like a good Ph.D.¬†student, I began a saga of Google and StackOverFlow searches to find the answers I was looking for. Coincidentally, on the same day (!), I came across Olivia Vane‚Äôs tweet about her talk at Observable Insight 2022, where she teaches drawing waterlines with code, but using D3.js.\nHer article about waterlines is great and explains all the context behind this visualization. I highly recommend reading it!\nBut the topic was hot, and I already had an idea how to use waterlines: Re-create an old map of the Brazilian coast!\nThen I discovered that there is a way to create waterlines using the sf and ggplot2 packages! So I created this text as a guide for the next people who need it! Today I will try to present a basic version for everyone to understand the idea and create their own amazing maps!\nLook how my map turned out!"
  },
  {
    "objectID": "posts/waterlines/en/index.html#creating-our-map",
    "href": "posts/waterlines/en/index.html#creating-our-map",
    "title": "Drawing waterlines with ggplot2 in R",
    "section": "Creating our map",
    "text": "Creating our map\nWe need a map with some water masses. Since my girlfriend is of Japanese descent, I will use today‚Äôs post to thank this culture for providing me with sushi, lamen, yakisoba, anime, and a lot of knowledge and respect!\nLet‚Äôs load the necessary packages, I‚Äôll talk about them during the text.\nIf you have questions about a function, just click on its name to go to the package page!\n\n# Packages\nlibrary(dplyr) #pipe and basics\nlibrary(ggplot2) #plotting\nlibrary(sf) #working with maps\nlibrary(rnaturalearth) #get countries shapefiles\n\nNow we need the map of Japan. Good thing we have the rnaturalearth package!\n\njapan_map &lt;- rnaturalearth::ne_countries(country = \"Japan\", #country name\n                                         scale = \"medium\", #map resolution\n                                         returnclass = \"sf\" #object class\n                                         )\n\nWe can check out the map we just downloaded\n\njapan_map %&gt;% \n  ggplot()+\n  geom_sf()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nImportant\n\n\n\nSince the next process requires some geometry calculations, we will tell the sf package not to use the s2 package, as this can lead to errors.\n\nsf::sf_use_s2(FALSE)\n\n#&gt; Spherical geometry (s2) switched off\n\n\n\n\nAll done, now we just need to create the waterlines! We will use the st_buffer function from the sf package, as the name says, it calculates a buffer around the geometry, which is exactly what we need! Each line of code is a waterline, add as many as you like!\nAfter executing each line you will get a warning. Don‚Äôt worry, it will work!\n\njapan_buffer1 &lt;- sf::st_buffer(japan_map, dist = 0.1)\njapan_buffer2 &lt;- sf::st_buffer(japan_map, dist = 0.2)\njapan_buffer3 &lt;- sf::st_buffer(japan_map, dist = 0.3)\njapan_buffer4 &lt;- sf::st_buffer(japan_map, dist = 0.4)\n\n#&gt; Warning: st_buffer does not correctly buffer longitude/latitude datadist is assumed to be in decimal degrees (arc_degrees).\n\nNow we can plot it!\n\njapan_map %&gt;% \n  ggplot()+\n  geom_sf()+\n  geom_sf(data = japan_buffer1, fill = NA)+\n  geom_sf(data = japan_buffer2, fill = NA)+\n  geom_sf(data = japan_buffer3, fill = NA)+\n  geom_sf(data = japan_buffer4, fill = NA)\n\n\n\n\n\n\n\n\nLet‚Äôs add some details and make this map even cooler!\n\njapan_map %&gt;% \n  ggplot()+\n  geom_sf(fill = \"#f9e9ca\", \n          color = \"#48351c\",\n          linewidth = 0.4)+\n  geom_sf(data = japan_buffer1, \n          fill = NA, \n          color = \"#48351c90\")+\n  geom_sf(data = japan_buffer2, \n          fill = NA, \n          color = \"#48351c70\")+\n  geom_sf(data = japan_buffer3, \n          fill = NA, \n          color = \"#48351c50\")+\n  geom_sf(data = japan_buffer4, \n          fill = NA, \n          color = \"#48351c30\")+\n  theme_bw()+\n  theme(\n    panel.background = element_rect(fill = \"#badff0\"),\n    panel.grid = element_line(color = \"#afd2e2\")\n  )+\n  coord_sf(clip = \"off\")\n\n\n\n\n\n\n\n\nAwesome! I hope you enjoyed this tutorial. I would like to thanks Olivia Vane, Maya Gans and Georgios Karamanis for the inspiration and tips for this post!\nShare it with your friends and send me your maps with waterlines!\nDon‚Äôt forget to take a look at my Charts page!\n\n\n\n\n\n\n\nExpand for Session Info\n\n\n\n\n\n\n\n‚îÄ Session info ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n setting  value\n version  R version 4.3.1 (2023-06-16 ucrt)\n os       Windows 11 x64 (build 22621)\n system   x86_64, mingw32\n ui       RTerm\n language (EN)\n collate  Portuguese_Brazil.utf8\n ctype    Portuguese_Brazil.utf8\n tz       America/Sao_Paulo\n date     2024-02-23\n pandoc   3.1.1 @ C:/Program Files/RStudio/resources/app/bin/quarto/bin/tools/ (via rmarkdown)\n\n‚îÄ Packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n package       * version    date (UTC) lib source\n dplyr         * 1.1.3      2023-09-03 [1] CRAN (R 4.3.2)\n ggplot2       * 3.5.0.9000 2024-02-23 [1] Github (tidyverse/ggplot2@e8a388e)\n rnaturalearth * 1.0.1      2023-12-15 [1] CRAN (R 4.3.2)\n sessioninfo   * 1.2.2      2021-12-06 [1] CRAN (R 4.3.2)\n sf            * 1.0-14     2023-07-11 [1] CRAN (R 4.3.2)\n\n [1] C:/Users/Bruno Mioto/AppData/Local/R/win-library/4.3\n [2] C:/Program Files/R/R-4.3.1/library\n\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
  },
  {
    "objectID": "posts/intro_ggplot2/en/index.html#used-packages",
    "href": "posts/intro_ggplot2/en/index.html#used-packages",
    "title": "ggplot2 101",
    "section": "Used packages",
    "text": "Used packages\nIn this lesson we will use the following packagesüì¶:\n\n  {dplyr}  for data manipulation\n  {ggplot2}  to create charts\n  {ggpath}  to plot images in a much easier way\n  {pokemon}  to get the pokemon table\n\nTo install the packages, we use the following script:\n\ninstall.packages(c(\"dplyr\", \"ggplot2\", \n                   \"ggpath\", \"pokemon\"))\n\nNow that we have the packages installed, just load them.\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(ggpath)\nlibrary(pokemon)"
  },
  {
    "objectID": "posts/intro_ggplot2/en/index.html#the-data",
    "href": "posts/intro_ggplot2/en/index.html#the-data",
    "title": "ggplot2 101",
    "section": "The data",
    "text": "The data\nTo create our charts, we need a dataset. We‚Äôll use the   {pokemon} üì¶ package created by William Amorim!\n\npokemon_df &lt;- pokemon::pokemon"
  },
  {
    "objectID": "posts/intro_ggplot2/en/index.html#charts-with-r-base",
    "href": "posts/intro_ggplot2/en/index.html#charts-with-r-base",
    "title": "ggplot2 101",
    "section": "Charts with R base",
    "text": "Charts with R base\nOne way to create graphs is to use R base itself, which is very simple but allows quick visualizations.\nWe can create scatter plots, for example.\n\nplot(height ~ weight, data = pokemon_df)\n\n\n\n\n\n\n\n\nThe problem begins when we want to make these charts more appealing\n\nplot(height ~ weight, data = pokemon_df,\n     main = \"Title\",\n     xlab = \"Mass (kg)\", ylab = \"Height (m)\",\n     pch = 19, frame = FALSE)\nabline(lm(height ~ weight, data = pokemon_df), col = \"blue\")\n\n\n\n\n\n\n\n\nIt‚Äôs confusing and I find it very difficult to make any chart like this more appealing."
  },
  {
    "objectID": "posts/intro_ggplot2/en/index.html#charts-with-ggplot2",
    "href": "posts/intro_ggplot2/en/index.html#charts-with-ggplot2",
    "title": "ggplot2 101",
    "section": "Charts with ggplot2",
    "text": "Charts with ggplot2\nBut now let‚Äôs get to know the   {ggplot2} üì¶ package. This package was the thesis of Hadley Wickham, now Chief Scientist at RStudio/Posit.\nThe magic here is that this package incorporated the grammar of graphics (hence the gg), which brought several fundamentals to be followed. One of them is the creation of graphics in layers, as if it were a painting!\n\n\n\nSource: QCBS R Workshop Series\n\n\nThis package is already included in the   {tidyverse} üì¶ and follows the same principle.\n\nlibrary(ggplot2)\n\nIf we just run ggplot(), we‚Äôll get a blank canvas.\n\nggplot()\n\n\n\n\n\n\n\n\nNow we have to add our dataset and what our axes will be.\nWhenever we are talking about a variable from our dataset, we have to put it inside the aes() argument, which stands for aesthetics.\n\nggplot(data = pokemon_df,\n       aes(x = weight,\n           y = height))\n\n\n\n\n\n\n\n\nIn fact, as ggplot2 works in layers, we can use it as follows:\n\nggplot(data = pokemon_df)+\n  aes(x = weight,\n      y = height)\n\n\n\n\n\n\n\n\nAs ggplot2 is part of the   {tidyverse} üì¶, we can tell R in the imperative: ‚ÄúGet the dataset pokemon_df and then create the ggplot‚Ä¶‚Äù. The good thing about this approach is that, as ggplot already knows the dataset beforehand, it helps us select the variables (press tab before writing the variables).\n\npokemon_df %&gt;% \n  ggplot(aes(x = weight,\n             y = height))\n\n\n\n\n\n\n\n\nNow we have our chart with the axes delimited, and we can add as many layers as we like. The principle of ggplot is similar to pipe, where the information is passed directly to the layer below, so we don‚Äôt need to add the data again.\n\nGeometries\nGeometries are functions that start with geom_*. There are lots of them and we can get a little help with ggplot2 cheatsheet.\nFirst, let‚Äôs create a scatterplot\n\npokemon_df %&gt;% \n  ggplot(aes(x = weight,\n             y = height))+\n  geom_point()\n\n\n\n\n\n\n\n\nTo add another layer of geometry, just add another layer to this canvas. Let‚Äôs add a trend line with the geom_smooth() function.\n\npokemon_df %&gt;% \n  ggplot(aes(x = weight,\n             y = height))+\n  geom_point()+\n  geom_smooth()\n\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n\n\n\n\n\n\n\n\n\nWe can add a linear trend line with the argument method = \"lm\"!\n\npokemon_df %&gt;% \n  ggplot(aes(x = weight,\n             y = height))+\n  geom_point()+\n  geom_smooth(method = \"lm\")\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\n\n\n\n\nHere we can see how ggplot2 works like a painting. As geom_smooth() was called after geom_point(), it is plotted on top.\nLet‚Äôs look at the same example but inverting these geometries.\n\npokemon_df %&gt;% \n  ggplot(aes(x = weight,\n             y = height))+\n  geom_smooth(method = \"lm\")+\n  geom_point()\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\n\n\n\n\nLet‚Äôs make a boxplot (using the geom_boxplot geometry) of the type of pokemon by height\n\npokemon_df %&gt;% \n  ggplot(aes(x = type_1, y = height))+\n  geom_boxplot()\n\n\n\n\n\n\n\n\nNow let‚Äôs make a column chart (using the geom_col() geometry) of the pokemons‚Äô attacks.\n\npokemon_df %&gt;% \n  ggplot(aes(x = pokemon, y = attack))+\n  geom_col()\n\n\n\n\n\n\n\n\nWhoa! We have a lot of data! Let‚Äôs filter only the starter pokemons and their evolutions to plot.\n\nstarters &lt;- pokemon_df %&gt;% \n  filter(id %in% 1:9)\n\nLet‚Äôs test it!\n\nstarters %&gt;% \n  ggplot(aes(x = pokemon, y = attack))+\n  geom_col()\n\n\n\n\n\n\n\n\nWe can invert the axes, just switch. Especially with large texts, it‚Äôs best to keep them on the y-axis.\n\nstarters %&gt;% \n  ggplot(aes(x = attack, y = pokemon))+\n  geom_col()\n\n\n\n\n\n\n\n\nThe pokemons are not in the order we would like (as in the dataset), they are in alphabetical order. So we have to sort them by id, but to be sorted we need to consider them as factors.\n\nstarters2 &lt;- starters %&gt;% \n  mutate(pokemon = reorder(pokemon, id))\n\nLet‚Äôs see if it worked using the   dplyr::glimpse()  function. Note the class of each variable between &lt;...&gt;\n\nglimpse(starters2)\n\nRows: 9\nColumns: 22\n$ id              &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9\n$ pokemon         &lt;fct&gt; bulbasaur, ivysaur, venusaur, charmander, charmeleon, ‚Ä¶\n$ species_id      &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9\n$ height          &lt;dbl&gt; 0.7, 1.0, 2.0, 0.6, 1.1, 1.7, 0.5, 1.0, 1.6\n$ weight          &lt;dbl&gt; 6.9, 13.0, 100.0, 8.5, 19.0, 90.5, 9.0, 22.5, 85.5\n$ base_experience &lt;dbl&gt; 64, 142, 236, 62, 142, 240, 63, 142, 239\n$ type_1          &lt;chr&gt; \"grass\", \"grass\", \"grass\", \"fire\", \"fire\", \"fire\", \"wa‚Ä¶\n$ type_2          &lt;chr&gt; \"poison\", \"poison\", \"poison\", NA, NA, \"flying\", NA, NA‚Ä¶\n$ hp              &lt;dbl&gt; 45, 60, 80, 39, 58, 78, 44, 59, 79\n$ attack          &lt;dbl&gt; 49, 62, 82, 52, 64, 84, 48, 63, 83\n$ defense         &lt;dbl&gt; 49, 63, 83, 43, 58, 78, 65, 80, 100\n$ special_attack  &lt;dbl&gt; 65, 80, 100, 60, 80, 109, 50, 65, 85\n$ special_defense &lt;dbl&gt; 65, 80, 100, 50, 65, 85, 64, 80, 105\n$ speed           &lt;dbl&gt; 45, 60, 80, 65, 80, 100, 43, 58, 78\n$ color_1         &lt;chr&gt; \"#78C850\", \"#78C850\", \"#78C850\", \"#F08030\", \"#F08030\",‚Ä¶\n$ color_2         &lt;chr&gt; \"#A040A0\", \"#A040A0\", \"#A040A0\", NA, NA, \"#A890F0\", NA‚Ä¶\n$ color_f         &lt;chr&gt; \"#81A763\", \"#81A763\", \"#81A763\", NA, NA, \"#DE835E\", NA‚Ä¶\n$ egg_group_1     &lt;chr&gt; \"monster\", \"monster\", \"monster\", \"monster\", \"monster\",‚Ä¶\n$ egg_group_2     &lt;chr&gt; \"plant\", \"plant\", \"plant\", \"dragon\", \"dragon\", \"dragon‚Ä¶\n$ url_icon        &lt;chr&gt; \"//archives.bulbagarden.net/media/upload/7/7b/001MS6.p‚Ä¶\n$ generation_id   &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1\n$ url_image       &lt;chr&gt; \"https://raw.githubusercontent.com/HybridShivam/Pokemo‚Ä¶\n\n\nLook how it‚Äôs sorted now!\n\nstarters2 %&gt;% \n  ggplot(aes(x = attack, y = pokemon))+\n  geom_col()\n\n\n\n\n\n\n\n\nThese charts are missing colors!\nNow let‚Äôs use the color and fill arguments. When the shape is solid, we only use color, if it has an outline and a filling, we use color and fill, respectively.\nWe can color according to any variable, in this case we‚Äôll color by type!\nNote that we can determine the variable in the ggplot() function and it will be used for all the following ones. If we only want to apply it to a single layer, we only add it to that layer.\n\nstarters2 %&gt;% \n  ggplot(aes(x = attack, y = pokemon, fill = type_1))+\n  geom_col()\n\n\n\n\n\n\n\n\nNow we can add the outline. As it‚Äôs not a variable (it‚Äôs a fixed color), it doesn‚Äôt have to go inside aes()\n\nstarters2 %&gt;% \n  ggplot(aes(x = attack, y = pokemon, fill = type_1))+\n  geom_col(color = \"black\")\n\n\n\n\n\n\n\n\n\n\nLabels\nEvery chart can have a title, subtitle, caption, axis title, etc.\nAll this can be determined using the labs() function within ggplot. Note that the legend is created according to the fill variable, so the title of the legend will follow this variable.\n\nstarters2 %&gt;% \n  ggplot(aes(x = attack, y = pokemon, fill = type_1))+\n  geom_col(color = \"black\")+\n  labs(\n    title = \"The starter pokemons\",\n    subtitle = \"Separated by type\",\n    caption = \"Bruno Mioto\",\n    x = \"Attack\",\n    y = \"Pokemon\",\n    fill = \"Type\"\n  )\n\n\n\n\n\n\n\n\n\n\nScales\nWhat if we want to edit the scales? In that case we‚Äôll use the scale_* set of functions.\nLet‚Äôs edit the X axis. The breaks are every 20 attack points, let‚Äôs put them every 10 points. As the x-axis is continuous, we‚Äôll use the scale_x_continuous() function. The breaks argument helps us with this task!\n\nstarters2 %&gt;% \n  ggplot(aes(x = attack, y = pokemon, fill = type_1))+\n  geom_col(color = \"black\")+\n  scale_x_continuous(breaks = seq(0,200,10))\n\n\n\n\n\n\n\n\nColors can also be defined using the scale_* function. These colors are not exactly what we want, we can define them manually using the scale_fill_manual() function.\nAs the colors are defined according to type, we‚Äôll use them as a basis. The dataset itself provides the colors for each type. For the water type we‚Äôll use the color #6890F0‚óâ, for the fire type we‚Äôll use the color #F08030‚óâ and for the grass type we‚Äôll use the color #78C850‚óâ.\n\nstarters2 %&gt;% \n  ggplot(aes(x = attack, y = pokemon, fill = type_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"water\" = \"#6890F0\",\n      \"fire\" = \"#F08030\",\n      \"grass\" = \"#78C850\"\n    )\n  )\n\n\n\n\n\n\n\n\nIn addition to defining the colors, we can also determine the labels that each color will have in the legend. We‚Äôll do this within the scale function too, but with the labels argument.\n\nstarters2 %&gt;% \n  ggplot(aes(x = attack, y = pokemon, fill = type_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"water\" = \"#6890F0\",\n      \"fire\" = \"#F08030\",\n      \"grass\" = \"#78C850\"\n    ),\n    labels = c(\n      \"fire\" = \"Fire\",\n      \"grass\" = \"Grass\",\n      \"water\" = \"Water\"\n    )\n  )\n\n\n\n\n\n\n\n\n\n\nThemes\nBut these charts aren‚Äôt so pretty yet, we can edit anything in the charts, from the background color to the font!\nggplot2 already has some pre-defined themes. Let‚Äôs try them out\nThis is theme_bw()\n\nstarters2 %&gt;% \n  ggplot(aes(x = attack, y = pokemon, fill = type_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"water\" = \"#6890F0\",\n      \"fire\" = \"#F08030\",\n      \"grass\" = \"#78C850\"\n    )\n  )+\n  theme_bw()\n\n\n\n\n\n\n\n\nI really like theme_classic()\n\nstarters2 %&gt;% \n  ggplot(aes(x = attack, y = pokemon, fill = type_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"water\" = \"#6890F0\",\n      \"fire\" = \"#F08030\",\n      \"grass\" = \"#78C850\"\n    )\n  )+\n  theme_classic()\n\n\n\n\n\n\n\n\ntheme_minimal() is also widely used.\n\nstarters2 %&gt;% \n  ggplot(aes(x = attack, y = pokemon, fill = type_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"water\" = \"#6890F0\",\n      \"fire\" = \"#F08030\",\n      \"grass\" = \"#78C850\"\n    )\n  )+\n  theme_minimal()\n\n\n\n\n\n\n\n\nThe theme_void() maintains only the geometries of the generated chart.\n\nstarters2 %&gt;% \n  ggplot(aes(x = attack, y = pokemon, fill = type_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"water\" = \"#6890F0\",\n      \"fire\" = \"#F08030\",\n      \"grass\" = \"#78C850\"\n    )\n  )+\n  theme_void()\n\n\n\n\n\n\n\n\nBut we can edit anything within the chosen theme too. These functions are just predetermined configurations.\nMost of the parameters can be seen on this website. To change the theme parameters, we add the arguments to the theme() function.\nLet‚Äôs delete the title of the axes!\n\nstarters2 %&gt;% \n  ggplot(aes(x = attack, y = pokemon, fill = type_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"water\" = \"#6890F0\",\n      \"fire\" = \"#F08030\",\n      \"grass\" = \"#78C850\"\n    )\n  )+\n  theme(\n    axis.title = element_blank()\n  )\n\n\n\n\n\n\n\n\nOr change the background of the chart. Notice that we have plot (the whole chart) and panel (just the panel between the axes)\n\nstarters2 %&gt;% \n  ggplot(aes(x = attack, y = pokemon, fill = type_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"water\" = \"#6890F0\",\n      \"fire\" = \"#F08030\",\n      \"grass\" = \"#78C850\"\n    )\n  )+\n  theme(\n    plot.background = element_rect(fill = \"pink\"),\n    panel.background = element_rect(fill = \"yellow\")\n  )\n\n\n\n\n\n\n\n\nLet‚Äôs change the grid lines!\n\nstarters2 %&gt;% \n  ggplot(aes(x = attack, y = pokemon, fill = type_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"water\" = \"#6890F0\",\n      \"fire\" = \"#F08030\",\n      \"grass\" = \"#78C850\"\n    )\n  )+\n  theme(\n    plot.background = element_rect(fill = \"pink\"),\n    panel.background = element_rect(fill = \"yellow\",\n                                    color = \"blue\"),\n    panel.grid.major = element_line(color = \"green\"),\n    panel.grid.major.x = element_line(linetype = \"dashed\"),\n    panel.grid.minor.x = element_line(color = \"black\")\n  )\n\n\n\n\n\n\n\n\nOh my goodness! The chart isn‚Äôt pretty, but it‚Äôs didactic! (But don‚Äôt ever do something like that for real, please)\n\n\nFacets\nWe often have a lot of information to show in just one chart. For this we can use the idea of small multiples with the facet_wrap() function!\n\npokemon_df %&gt;% \n  ggplot(aes(x = attack, \n             y = defense, \n             color = generation_id))+\n  geom_point()+\n  facet_wrap(.~generation_id)\n\n\n\n\n\n\n\n\nIn this case, ggplot interpreted the generation_id column as a continuous number. But in this case each generation is independent of another. We can tell ggplot2 to interpret this variable as a factor.\n\npokemon_df %&gt;% \n  ggplot(aes(x = attack, \n             y = defense, \n             color = factor(generation_id)))+\n  geom_point()+\n  facet_wrap(.~factor(generation_id))\n\n\n\n\n\n\n\n\nWe can use the facets with other data too.\n\npokemon_df %&gt;% \n  ggplot(aes(x = attack, \n             y = defense, \n             color = type_1))+\n  geom_point()+\n  facet_wrap(.~type_1)"
  },
  {
    "objectID": "posts/intro_ggplot2/en/index.html#plotting-images",
    "href": "posts/intro_ggplot2/en/index.html#plotting-images",
    "title": "ggplot2 101",
    "section": "Plotting images",
    "text": "Plotting images\nIf we want to put images in our charts, the best indication is to use the package   {ggpath} üì¶. This is the best way to plot images!\nTo do this, use the geom_from_path() function. All we need to do is enter the column with the path to the picture.\nOne suggestion is to set the width argument to 0.1 as the pictures can get big!\n\nlibrary(ggpath)\n\nstarters2 %&gt;% \n  ggplot(aes(x = attack, y = pokemon, fill = type_1))+\n  geom_col(color = \"black\")+\n  geom_from_path(aes(path = url_image),\n                 width = 0.1)+\n  scale_fill_manual(\n    values = c(\n      \"water\" = \"#6890F0\",\n      \"fire\" = \"#F08030\",\n      \"grass\" = \"#78C850\"\n    )\n  )\n\n\n\n\n\n\n\n\n\nChart finished\nHere I‚Äôve added a few finishing touches to our chart (check the positioning of the names and figures!). Unfortunately it‚Äôs not for this post to go into all these details, but I‚Äôve left everything in the comments!\n\nstarters2 %&gt;% \n  ggplot(aes(x = attack, y = pokemon, fill = type_1))+\n  #add columns\n  geom_col(color = \"black\",\n           width = 0.5)+\n  #add names\n  geom_text(aes(label = pokemon,\n                color = type_1),\n            x = 1,\n            hjust = 0, #side alignment\n            nudge_y = 0.45, #vertical adjustment\n            fontface = \"bold\"\n            )+\n  #add figures\n  geom_from_path(aes(path = url_image),\n                 width = 0.1, #width relative to total\n                 hjust = 0 #side alignment\n                 )+\n  #add vertical line\n  geom_vline(xintercept = 0)+\n  #expand x-axis\n  scale_x_continuous(\n    expand = expansion(mult = c(0,0.1)) #expand left-right\n  )+\n  #edit colors (will affect text that uses color)\n  scale_color_manual(\n    values = c(\n      \"water\" = \"#6890F0\",\n      \"fire\" = \"#F08030\",\n      \"grass\" = \"#78C850\"\n    )\n  )+\n  #edit colors (will affect the column that uses fill)\n  scale_fill_manual(\n    values = c(\n      \"water\" = \"#6890F0\",\n      \"fire\" = \"#F08030\",\n      \"grass\" = \"#78C850\"\n    )\n  )+\n  #edit labs\n  labs(\n    x = \"Attack\",\n    caption = \"Bruno Mioto - @BrunoHMioto\"\n  )+\n  #use initial theme\n  theme_classic()+\n  #edit theme\n  theme(\n    #remove all subtitles\n    legend.position = \"none\",\n    #remove y-axis title\n    axis.title.y = element_blank(),\n    #remove text from y-axis\n    axis.text.y = element_blank(),\n    #remove ticks\n    axis.ticks = element_blank(),\n    #remove axes\n    axis.line = element_blank(),\n    #add grid line - major\n    panel.grid.major.x = element_line(),\n    #add dotted grid line - minor\n    panel.grid.minor.x = element_line(linetype = \"dashed\"),\n    #increase plot margins\n    plot.margin = margin(10,10,10,10,\"pt\"),\n    #change the color of the plot background\n    plot.background = element_rect(fill = \"#f1f1f1\", color = NA),\n    #change the background color of the panel\n    panel.background = element_rect(fill = \"#f1f1f1\", color = NA)\n  )+\n  #doesn't crop the images that come out of the panel\n  coord_cartesian(\n    clip = \"off\"\n  )\n\n\n\n\n\n\n\n\nEverything we‚Äôve seen so far is the basics of the basics in ggplot2, but it already allows us to do a lot of cool stuff! There are several examples of charts with ggplot2 here, and some ready-made scripts here!\nIf you found this content useful in any way, share it with your friends!\nWould you like a workshop with this material? Get in touch!"
  },
  {
    "objectID": "posts/trees_mga/pt/index.html#a-cidade",
    "href": "posts/trees_mga/pt/index.html#a-cidade",
    "title": "Mapeando as √°rvores de Maring√°-PR",
    "section": "A cidade",
    "text": "A cidade\nMaring√° √© uma cidade paranaense com 409 mil habitantes segundo o Censo 2022 conhecida nacionalmente pela flora abundante, onde 97,5% das edifica√ß√µes da cidade tinha uma √°vore pr√≥xima.\n\n\n\nBrasil e Maring√°\n\n\nA cidade foi planejada em 1947 como Cidade-Jardim, onde os parques e a vegeta√ß√£o permeiam a cidade idealizando um cintur√£o verde. O planejamento tamb√©m pode ser visto com as vias atuais que seguem um padr√£o Norte-Sul e Leste-Oeste bem evidente.\n\nMas as as vias e parques n√£o contam toda a hist√≥ria‚Ä¶"
  },
  {
    "objectID": "posts/trees_mga/pt/index.html#as-√°rvores",
    "href": "posts/trees_mga/pt/index.html#as-√°rvores",
    "title": "Mapeando as √°rvores de Maring√°-PR",
    "section": "As √°rvores",
    "text": "As √°rvores\nCom acesso via LAI aos dados georreferenciados de todas as √°rvores de Maring√°, cada √°rvore pode ser visualizada como um ponto no mapa!\n\nNo mapa acima n√£o existe nada al√©m de pontos para cada √°rvore. S√£o exatamente 142.893 √°rvores catalogadas que seguem o desenho das vias da cidade.\n\n\n\n\n\n\n\n\n\n√Årvores\n\n\n\n\n\n\n\n√Årvores+Vias\n\n\n\n\n\n\n\nVias\n\n\n\n\n\nA partir dos microdados de cada √°rvore na cidade, percebe-se a domin√¢ncia de Sibipirunas na cidade (23,6%), seguida de Oitis (15,3%). Das 142 mil √°rvores catalogadas, cerca de 17 mil n√£o puderam ser identificadas.\n\n\n\n10 esp√©cies de √°rvores mais comuns em Maring√°\n\n\nDentre as √°rvore da cidade, os Ip√™s se destacam pela beleza exuberante que apresentam no per√≠odo do inverno. Em destaque, s√£o apresentados os ip√™s roxos (#984ea3‚óâ), ip√™s brancos (#ffffff‚óâ), ip√™s amarelos (#ffff33‚óâ) e ip√™s rosas (#f781bf‚óâ).\n\nMas essas n√£o s√£o todas as √°rvores da cidade, j√° que o levantamento flor√≠stico foi realizado apenas nas vias urbanas. Praticamente todas as grandes √°reas sem pontos na visualiza√ß√£o s√£o √°reas florestais, fundos de vale, universidades (a UEM est√° bem no centro do mapa) ou novos bairros n√£o estudados.\nO acesso a esses dados via LAI s√≥ foi poss√≠vel com a ajuda do Bruno Morassutti, Co-fundador e Diretor de Advocacy da Fiquem Sabendo. A tabela com os dados disponibilizados pela prefeitura (esp√©cie e coordenadas) pode ser acessado aqui.\n\n\n\nBrasil e Maring√°\n√Årvores\n√Årvores+Vias\nVias\n10 esp√©cies de √°rvores mais comuns em Maring√°"
  },
  {
    "objectID": "posts/pt.html",
    "href": "posts/pt.html",
    "title": "Bruno Mioto",
    "section": "",
    "text": "Order By\n       Default\n         \n          Title\n        \n         \n          Date - Oldest\n        \n         \n          Date - Newest\n        \n         \n          Author\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot2\n\n\ndataviz\n\n\n\n\n\n\nJan 30, 2024\n\n\nBruno Mioto\n\n\n16 min\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot2\n\n\ndataviz\n\n\nmaps\n\n\n\n\n\n\nDec 5, 2023\n\n\nBruno Mioto\n\n\n15 min\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/pt.html#posts-em-portugu√™s",
    "href": "posts/pt.html#posts-em-portugu√™s",
    "title": "Bruno Mioto",
    "section": "",
    "text": "Order By\n       Default\n         \n          Title\n        \n         \n          Date - Oldest\n        \n         \n          Date - Newest\n        \n         \n          Author\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot2\n\n\ndataviz\n\n\n\n\n\n\nJan 30, 2024\n\n\nBruno Mioto\n\n\n16 min\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot2\n\n\ndataviz\n\n\nmaps\n\n\n\n\n\n\nDec 5, 2023\n\n\nBruno Mioto\n\n\n15 min\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/intro_ggplot2/pt/index.html#pacotes-utilizados",
    "href": "posts/intro_ggplot2/pt/index.html#pacotes-utilizados",
    "title": "Introdu√ß√£o ao ggplot2",
    "section": "Pacotes utilizados",
    "text": "Pacotes utilizados\nNessa aula vamos utilizar os seguintes pacotes:\n\ndplyr para manipula√ß√£o de dados\nggplot2 para criar gr√°ficos\nggpath para plotar imagens de uma forma bem mais f√°cil\npokemon para obter a tabela de pokemons em pt-br\n\nPara instalar os pacotes, utilizamos o seguinte script:\n\ninstall.packages(c(\"dplyr\", \"ggplot2\", \n                   \"ggpath\", \"pokemon\"))\n\nAgora que temos os pacotes instalados, √© s√≥ carreg√°-los.\n\nlibrary(dplyr)\nlibrary(pokemon)\nlibrary(ggplot2)\nlibrary(ggpath)"
  },
  {
    "objectID": "posts/intro_ggplot2/pt/index.html#os-dados",
    "href": "posts/intro_ggplot2/pt/index.html#os-dados",
    "title": "Introdu√ß√£o ao ggplot2",
    "section": "Os dados",
    "text": "Os dados\nPara criar nossos gr√°ficos, precisamos de um conjunto de dados. Vamos utilizar o pacote pokemon criado pelo William Amorim que tem o dataset traduzido!\n\npokemon_df &lt;- pokemon::pokemon_ptbr"
  },
  {
    "objectID": "posts/intro_ggplot2/pt/index.html#gr√°ficos-com-r-base",
    "href": "posts/intro_ggplot2/pt/index.html#gr√°ficos-com-r-base",
    "title": "Introdu√ß√£o ao ggplot2",
    "section": "Gr√°ficos com R base",
    "text": "Gr√°ficos com R base\nUma forma de criar gr√°ficos √© usando o pr√≥prio R base, que √© bem simples mas permite visualiza√ß√µes r√°pidas.\nPodemos criar gr√°ficos de dispers√£o, por exemplo.\n\nplot(altura ~ peso, data = pokemon_df)\n\n\n\n\n\n\n\n\nO problema come√ßa quando queremos deixar esses gr√°ficos mais bonitos\n\nplot(altura ~ peso, data = pokemon_df,\n     main = \"T√≠tulo\",\n     xlab = \"Massa (kg)\", ylab = \"Altura (m)\",\n     pch = 19, frame = FALSE)\nabline(lm(altura ~ peso, data = pokemon_df), col = \"blue\")\n\n\n\n\n\n\n\n\nIsso √© confuso e eu acho muito dif√≠cil de deixar qualquer gr√°fico assim mais bonito."
  },
  {
    "objectID": "posts/intro_ggplot2/pt/index.html#gr√°ficos-com-ggplot2",
    "href": "posts/intro_ggplot2/pt/index.html#gr√°ficos-com-ggplot2",
    "title": "Introdu√ß√£o ao ggplot2",
    "section": "Gr√°ficos com ggplot2",
    "text": "Gr√°ficos com ggplot2\nMas agora vamos conhecer o pacote ggplot2. Esse pacote foi a tese do Hadley Wickham, atual cientista-chefe da RStudio/Posit.\nA m√°gica aqui √© que esse pacote incorporou a gram√°tica de gr√°ficos (por isso o gg), que trouxe v√°rios fundamentos a serem seguidos. Um deles √© a cria√ß√£o de gr√°ficos por camadas, como se fosse uma pintura!\n\n\n\nFonte: QCBS R Workshop Series\n\n\nEsse pacote j√° est√° incluso no tidyverse e segue o mesmo princ√≠pio.\n\nlibrary(ggplot2)\n\nSe rodarmos s√≥ um ggplot(), teremos uma tela em branco.\n\nggplot()\n\n\n\n\n\n\n\n\nAgora temos que adicionar o nosso dataset e quais ser√£o nossos eixos.\nSempre que estivermos falando de uma vari√°vel do nosso dataset, temos que colocar dentro do argumento aes(), que significa aesthetics.\n\nggplot(data = pokemon_df,\n       aes(x = peso,\n           y = altura))\n\n\n\n\n\n\n\n\nInclusive, como o ggplot2 funciona em camadas, podemos usar da seguinte forma:\n\nggplot(data = pokemon_df)+\n  aes(x = peso,\n      y = altura)\n\n\n\n\n\n\n\n\nComo o ggplot2 faz parte do tidyverse, podemos falar para o R no imperativo: ‚ÄúPegue o dataset pokemon_df e ent√£o crie o ggplot‚Ä¶‚Äù. O bom dessa abordagem √© que, como o ggplot j√° sabe o dataset de antem√£o, ele nos ajuda a selecionar as vari√°veis (aperte tab antes de escrever as vari√°veis).\n\npokemon_df %&gt;% \n  ggplot(aes(x = peso,\n             y = altura))\n\n\n\n\n\n\n\n\nAgora temos nosso gr√°fico com os eixos delimitados, e podemos adicionar as camadas que quisermos. O princ√≠pio do ggplot √© parecido com o pipe, onde as informa√ß√µes s√£o passadas diretamente para a camada abaixo, assim n√£o precisamos adicionar os dados novamente.\n\nGeometrias\nAs geometrias s√£o fun√ß√µes que come√ßam por geom_*. Existem muitas e podemos ter uma ajudinha com a colinha do ggplot2.\nPrimeiro, vamos criar um gr√°fico de dispers√£o\n\npokemon_df %&gt;% \n  ggplot(aes(x = peso,\n             y = altura))+\n  geom_point()\n\n\n\n\n\n\n\n\nPara adicionar mais uma camada de geometria, √© s√≥ adicionar mais uma camada nessa pintura. Vamos adicionar uma linha de tend√™ncia com a fun√ß√£o geom_smooth().\n\npokemon_df %&gt;% \n  ggplot(aes(x = peso,\n             y = altura))+\n  geom_point()+\n  geom_smooth()\n\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n\n\n\n\n\n\n\n\n\nPodemos adicionar uma linha de tend√™ncia linear com o argumento method = \"lm\"!\n\npokemon_df %&gt;% \n  ggplot(aes(x = peso,\n             y = altura))+\n  geom_point()+\n  geom_smooth(method = \"lm\")\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\n\n\n\n\nAqui podemos perceber como o ggplot2 funciona igual a uma pintura. Como o geom_smooth() foi chamado depois do geom_point(), ele √© plotado por cima.\nVamos ver o mesmo exemplo mas invertendo essas geometrias.\n\npokemon_df %&gt;% \n  ggplot(aes(x = peso,\n             y = altura))+\n  geom_smooth(method = \"lm\")+\n  geom_point()\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\n\n\n\n\nVamos fazer um boxplot (utilizando a geometria geom_boxplot) do tipo do pokemon por altura\n\npokemon_df %&gt;% \n  ggplot(aes(x = tipo_1, y = altura))+\n  geom_boxplot()\n\n\n\n\n\n\n\n\nAgora vamos fazer um gr√°fico de colunas (utilizando a geometria geom_col()) do ataque dos pokemons.\n\npokemon_df %&gt;% \n  ggplot(aes(x = pokemon, y = ataque))+\n  geom_col()\n\n\n\n\n\n\n\n\nEita! N√≥s temos muitos dados! Vamos filtrar s√≥ os pokemons iniciais e suas evolu√ß√µes para plotar.\n\niniciais &lt;- pokemon_df %&gt;% \n  filter(id %in% 1:9)\n\nVamos testar!\n\niniciais %&gt;% \n  ggplot(aes(x = pokemon, y = ataque))+\n  geom_col()\n\n\n\n\n\n\n\n\nPodemos inverter os eixos, √© s√≥ mudar. Inclusive com textos grandes, √© mais indicado eles ficarem no eixo y.\n\niniciais %&gt;% \n  ggplot(aes(x = ataque, y = pokemon))+\n  geom_col()\n\n\n\n\n\n\n\n\nOs pokemons n√£o est√£o na ordem que gostar√≠amos (como no dataset), est√£o em ordem alfab√©tica. Ent√£o temos que orden√°-los pela id, mas para serem ordenados precisamos consider√°-los como fatores.\n\niniciais2 &lt;- iniciais %&gt;% \n  mutate(pokemon = reorder(pokemon, id))\n\nVamos ver se funcionou usando a fun√ß√£o glimpse() (significa espiadinha do dplyr). Perceba a classe de cada vari√°vel entre &lt;...&gt;\n\nglimpse(iniciais2)\n\nRows: 9\nColumns: 22\n$ id              &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9\n$ pokemon         &lt;fct&gt; bulbasaur, ivysaur, venusaur, charmander, charmeleon, ‚Ä¶\n$ id_especie      &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9\n$ altura          &lt;dbl&gt; 0.07, 0.10, 0.20, 0.06, 0.11, 0.17, 0.05, 0.10, 0.16\n$ peso            &lt;dbl&gt; 0.69, 1.30, 10.00, 0.85, 1.90, 9.05, 0.90, 2.25, 8.55\n$ exp_base        &lt;dbl&gt; 64, 142, 236, 62, 142, 240, 63, 142, 239\n$ tipo_1          &lt;chr&gt; \"grama\", \"grama\", \"grama\", \"fogo\", \"fogo\", \"fogo\", \"√°g‚Ä¶\n$ tipo_2          &lt;chr&gt; \"venenoso\", \"venenoso\", \"venenoso\", NA, NA, \"voador\", ‚Ä¶\n$ hp              &lt;dbl&gt; 45, 60, 80, 39, 58, 78, 44, 59, 79\n$ ataque          &lt;dbl&gt; 49, 62, 82, 52, 64, 84, 48, 63, 83\n$ defesa          &lt;dbl&gt; 49, 63, 83, 43, 58, 78, 65, 80, 100\n$ ataque_especial &lt;dbl&gt; 65, 80, 100, 60, 80, 109, 50, 65, 85\n$ defesa_especial &lt;dbl&gt; 65, 80, 100, 50, 65, 85, 64, 80, 105\n$ velocidade      &lt;dbl&gt; 45, 60, 80, 65, 80, 100, 43, 58, 78\n$ cor_1           &lt;chr&gt; \"#78C850\", \"#78C850\", \"#78C850\", \"#F08030\", \"#F08030\",‚Ä¶\n$ cor_2           &lt;chr&gt; \"#A040A0\", \"#A040A0\", \"#A040A0\", NA, NA, \"#A890F0\", NA‚Ä¶\n$ cor_final       &lt;chr&gt; \"#81A763\", \"#81A763\", \"#81A763\", NA, NA, \"#DE835E\", NA‚Ä¶\n$ grupo_ovo_1     &lt;chr&gt; \"monster\", \"monster\", \"monster\", \"monster\", \"monster\",‚Ä¶\n$ grupo_ovo_2     &lt;chr&gt; \"plant\", \"plant\", \"plant\", \"dragon\", \"dragon\", \"dragon‚Ä¶\n$ url_icone       &lt;chr&gt; \"//archives.bulbagarden.net/media/upload/7/7b/001MS6.p‚Ä¶\n$ url_imagem      &lt;chr&gt; \"https://raw.githubusercontent.com/HybridShivam/Pokemo‚Ä¶\n$ id_geracao      &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1\n\n\nOlha como ficou ordenado agora!\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon))+\n  geom_col()\n\n\n\n\n\n\n\n\nEst√£o faltando cores nesses gr√°ficos!\nAgora vamos utilizar os argumentos color e fill. Quando a forma for s√≥lida, utilizamos apenas o color, se tiver contorno e preenchimento, utilizamos o colore fill, respectivamente.\nPodemos colorir de acordo com qualquer vari√°vel, nesse caso vamos colorir por tipo!\nVeja que podemos determinar a vari√°vel na fun√ß√£o ggplot() e ela servir√° para todas as seguintes. Se quisermos aplicar a uma camada apenas, colocamos apenas nela.\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col()\n\n\n\n\n\n\n\n\nAgora podemos adicionar o contorno. Como ele n√£o √© uma vari√°vel (√© uma cor fixa), n√£o precisa ir dentro do aes()\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")\n\n\n\n\n\n\n\n\n\n\nLabels\nTodo gr√°fico pode ter t√≠tulo, subt√≠tulo, titulo dos eixos, etc.\nTudo isso pode ser determinado utilizando a fun√ß√£o labs() dentro do ggplot. Perceba que a legenda √© criada de acordo com a vari√°vel fill, por isso o t√≠tulo da legenda seguir√° essa vari√°vel.\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  labs(\n    title = \"Os pokemons iniciais\",\n    subtitle = \"Separados por tipo\",\n    caption = \"Bruno Mioto\",\n    x = \"Ataque\",\n    y = \"Pokemon\",\n    fill = \"Tipo\"\n  )\n\n\n\n\n\n\n\n\n\n\nEscalas\nE se quisermos editar as escalas? Nesse caso vamos utilizar o conjunto de fun√ß√µes scale_*.\nVamos editar o eixo X. As quebras est√£o de 20 em 20, vamos colocar de 10 em 10. Como o eixo x √© cont√≠nuo, vamos usar a fun√ß√£o scale_x_continuous(). O argumento breaks nos ajuda com essa tarefa!\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_x_continuous(breaks = seq(0,200,10))\n\n\n\n\n\n\n\n\nAs cores tamb√©m podem ser definidas pela fun√ß√£o scale_*. Essas cores n√£o s√£o exatamente as que queremos, podemos definir manualmente usando a fun√ß√£o scale_fill_manual().\nComo as cores est√£o definidas de acordo com o tipo, vamos usar elas como base. O pr√≥prio dataset traz as cores para cada tipo. Para o tipo √°gua usaremos a cor #6890F0‚óâ, para o tipo fogo usaremos a cor #F08030‚óâ e para o tipo grama usaremos a cor #78C850‚óâ.\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"√°gua\" = \"#6890F0\",\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\"\n    )\n  )\n\n\n\n\n\n\n\n\nAl√©m de determinar as cores, tamb√©m podemos determinar as labels que cada cor ter√° na legenda. Vamos fazer isso dentro da fun√ß√£o scale tamb√©m, mas com o argumento labels.\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"√°gua\" = \"#6890F0\",\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\"\n    ),\n    labels = c(\n      \"fogo\" = \"Fogo\",\n      \"grama\" = \"Grama\",\n      \"√°gua\" = \"√Ågua\"\n    )\n  )\n\n\n\n\n\n\n\n\n\n\nTemas\nMas esses gr√°ficos n√£o est√£o t√£o bonitos ainda, podemos editar qualquer coisa dos gr√°ficos, desde a cor do fundo at√© a fonte.\nO ggplot2 j√° tem alguns temas pr√© definidos. Vamos testar\nEssa √© a theme_bw()\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"√°gua\" = \"#6890F0\",\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\"\n    )\n  )+\n  theme_bw()\n\n\n\n\n\n\n\n\nEu gosto bastante do theme_classic()\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"√°gua\" = \"#6890F0\",\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\"\n    )\n  )+\n  theme_classic()\n\n\n\n\n\n\n\n\nO theme_minimal() tamb√©m √© muito utilizado.\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"√°gua\" = \"#6890F0\",\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\"\n    )\n  )+\n  theme_minimal()\n\n\n\n\n\n\n\n\nO tema theme_void() mant√©m apenas as geometrias do gr√°fico gerado.\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"√°gua\" = \"#6890F0\",\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\"\n    )\n  )+\n  theme_void()\n\n\n\n\n\n\n\n\nMas podemos editar qualquer coisa dentro do tema escolhido tamb√©m. Essas fun√ß√µes s√£o apenas configura√ß√£o pr√©-determinadas.\nA maioria das configura√ß√µes podem ser vistas neste site. Para mudar as configura√ß√µes do tema, adicionamos os argumentos na fun√ß√£o theme()\nVamos eliminar o t√≠tulo dos eixos\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"√°gua\" = \"#6890F0\",\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\"\n    )\n  )+\n  theme(\n    axis.title = element_blank()\n  )\n\n\n\n\n\n\n\n\nOu mudar o fundo do gr√°fico. Perceba que temos plot (o gr√°fico total) e panel (apenas o painel entre os eixos)\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"√°gua\" = \"#6890F0\",\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\"\n    )\n  )+\n  theme(\n    plot.background = element_rect(fill = \"pink\"),\n    panel.background = element_rect(fill = \"yellow\")\n  )\n\n\n\n\n\n\n\n\nVamos mudar as linhas de grade!\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  scale_fill_manual(\n    values = c(\n      \"√°gua\" = \"#6890F0\",\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\"\n    )\n  )+\n  theme(\n    plot.background = element_rect(fill = \"pink\"),\n    panel.background = element_rect(fill = \"yellow\",\n                                    color = \"blue\"),\n    panel.grid.major = element_line(color = \"green\"),\n    panel.grid.major.x = element_line(linetype = \"dashed\"),\n    panel.grid.minor.x = element_line(color = \"black\")\n  )\n\n\n\n\n\n\n\n\nMeu Deus! O gr√°fico n√£o ficou bonito, mas ficou did√°tico! (Mas nunca fa√ßa algo assim de verdade, por favor)\n\n\nFacetas\nMuitas vezes temos muitas informa√ß√µes para mostrar em apenas um gr√°fico. Para isso podemos utilizar a ideia de pequenos m√∫ltiplos com a fun√ß√£o facet_wrap()!\n\npokemon_df %&gt;% \n  ggplot(aes(x = ataque, \n             y = defesa, \n             color = id_geracao))+\n  geom_point()+\n  facet_wrap(.~id_geracao)\n\n\n\n\n\n\n\n\nNesse caso o ggplot interpretou a coluna id_geracao como num√©rica cont√≠nua. Mas nesse caso cada gera√ß√£o √© independente de outra. Podemos dizer para o ggplot2 interpretas essa vari√°vel como fator.\n\npokemon_df %&gt;% \n  ggplot(aes(x = ataque, \n             y = defesa, \n             color = factor(id_geracao)))+\n  geom_point()+\n  facet_wrap(.~factor(id_geracao))\n\n\n\n\n\n\n\n\nPodemos usar as facetas com outros dados tamb√©m.\n\npokemon_df %&gt;% \n  ggplot(aes(x = ataque, \n             y = defesa, \n             color = tipo_1))+\n  geom_point()+\n  facet_wrap(.~tipo_1)"
  },
  {
    "objectID": "posts/intro_ggplot2/pt/index.html#plotar-imagens",
    "href": "posts/intro_ggplot2/pt/index.html#plotar-imagens",
    "title": "Introdu√ß√£o ao ggplot2",
    "section": "Plotar imagens",
    "text": "Plotar imagens\nSe quisermos colocar figuras nos nosso gr√°ficos, a melhor indica√ß√£o √© usar o pacote ggpath. Essa √© melhor forma de plotar imagens!\nPara isso vamos utilizar a fun√ß√£o geom_from_path(). S√≥ precisamos informar qual √© a coluna com o caminho para a figura.\nUma sugest√£o √© colocar o argumento da largura width como 0.1 pois as figuras podem ficar gigantes!\n\nlibrary(ggpath)\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  geom_col(color = \"black\")+\n  geom_from_path(aes(path = url_imagem),\n                 width = 0.1)+\n  scale_fill_manual(\n    values = c(\n      \"√°gua\" = \"#6890F0\",\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\"\n    )\n  )\n\n\n\n\n\n\n\n\n\nGr√°fico finalizado\nAqui adicionei alguns toques finais em nosso gr√°fico (veja o posicionamente dos nomes e figuras!). Infelizmente n√£o cabe a esse post abordar todos esses detalhes, mas deixei tudo com coment√°rios!\n\niniciais2 %&gt;% \n  ggplot(aes(x = ataque, y = pokemon, fill = tipo_1))+\n  #adiciona colunas\n  geom_col(color = \"black\",\n           width = 0.5)+\n  #adiciona nomes\n  geom_text(aes(label = pokemon,\n                color = tipo_1),\n            x = 1,\n            hjust = 0, #alinhamento lateral\n            nudge_y = 0.45, #ajuste vertical\n            fontface = \"bold\" #negrito\n            )+\n  #adiciona figuras\n  geom_from_path(aes(path = url_imagem),\n                 width = 0.1, #largura relativa ao total\n                 hjust = 0 #alinhamento lateral\n                 )+\n  #adiciona linha vertical\n  geom_vline(xintercept = 0)+\n  #expande eixo x\n  scale_x_continuous(\n    expand = expansion(mult = c(0,0.1)) #expans√£o esquerda-direita\n  )+\n  #edita cores (vai afetar o texto que usa color)\n  scale_color_manual(\n    values = c(\n      \"√°gua\" = \"#6890F0\",\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\"\n    )\n  )+\n  #edita cores (vai afetar a coluna que usa fill)\n  scale_fill_manual(\n    values = c(\n      \"√°gua\" = \"#6890F0\",\n      \"fogo\" = \"#F08030\",\n      \"grama\" = \"#78C850\"\n    )\n  )+\n  #edita labs\n  labs(\n    x = \"Ataque\",\n    caption = \"Bruno Mioto - @BrunoHMioto\"\n  )+\n  #usa tema inicial\n  theme_classic()+\n  #edita tema\n  theme(\n    #remover toda a legenda\n    legend.position = \"none\",\n    #remove t√≠tulo do eixo y\n    axis.title.y = element_blank(),\n    #remove texto do eixo y\n    axis.text.y = element_blank(),\n    #remove ticks\n    axis.ticks = element_blank(),\n    #remove eixos\n    axis.line = element_blank(),\n    #adiciona linha de grade - major\n    panel.grid.major.x = element_line(),\n    #adiciona linha de grade pontilhada - minor\n    panel.grid.minor.x = element_line(linetype = \"dashed\"),\n    #aumenta as margens do gr√°fico\n    plot.margin = margin(10,10,10,10,\"pt\"),\n    #muda a cor do fundo do gr√°fico\n    plot.background = element_rect(fill = \"#f1f1f1\", color = NA),\n    #muda a cor do fundo do painel\n    panel.background = element_rect(fill = \"#f1f1f1\", color = NA)\n  )+\n  #n√£o corta as imagens que saem do painel\n  coord_cartesian(\n    clip = \"off\"\n  )\n\n\n\n\n\n\n\n\nTudo o que vimos at√© aqui √© o b√°sico do b√°sico no ggplot2, mas que j√° nos permite fazer muita coisa legal! Tem v√°rios exemplos de gr√°ficos com ggplot2 aqui, e alguns scripts prontinhos aqui!\nSe achou este conte√∫do √∫til de alguma forma, compartilhe com seus amigos!\nQuer um minicurso/workshop com este material? Entre em contato!"
  },
  {
    "objectID": "posts/en.html",
    "href": "posts/en.html",
    "title": "Bruno Mioto",
    "section": "",
    "text": "Order By\n       Default\n         \n          Title\n        \n         \n          Date - Oldest\n        \n         \n          Date - Newest\n        \n         \n          Author\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot2\n\n\ndataviz\n\n\n\n\n\n\nFeb 27, 2024\n\n\nBruno Mioto\n\n\n16 min\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot2\n\n\ndataviz\n\n\nmaps\n\n\n\n\n\n\nFeb 1, 2023\n\n\nBruno Mioto\n\n\n5 min\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/en.html#posts-in-english",
    "href": "posts/en.html#posts-in-english",
    "title": "Bruno Mioto",
    "section": "",
    "text": "Order By\n       Default\n         \n          Title\n        \n         \n          Date - Oldest\n        \n         \n          Date - Newest\n        \n         \n          Author\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot2\n\n\ndataviz\n\n\n\n\n\n\nFeb 27, 2024\n\n\nBruno Mioto\n\n\n16 min\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nggplot2\n\n\ndataviz\n\n\nmaps\n\n\n\n\n\n\nFeb 1, 2023\n\n\nBruno Mioto\n\n\n5 min\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "twitter-bots.html",
    "href": "twitter-bots.html",
    "title": "Twitter bots",
    "section": "",
    "text": "I created some Twitter bots to tweet daily! But Elon Musk killed it."
  },
  {
    "objectID": "twitter-bots.html#reservat√≥rios-bot",
    "href": "twitter-bots.html#reservat√≥rios-bot",
    "title": "Twitter bots",
    "section": "Reservat√≥rios bot",
    "text": "Reservat√≥rios bot\nTweets by ReservatorioBot"
  },
  {
    "objectID": "twitter-bots.html#manchete-bot",
    "href": "twitter-bots.html#manchete-bot",
    "title": "Twitter bots",
    "section": "Manchete bot",
    "text": "Manchete bot\nTweets by MancheteBot"
  },
  {
    "objectID": "scripts.html",
    "href": "scripts.html",
    "title": "Scripts",
    "section": "",
    "text": "This is some of the codes I wrote to create my charts. Each chart has its own code right below it.\nYou can navigate through the site using the sidebar on desktop.\nIf some code is useful to you, please consider donating."
  },
  {
    "objectID": "scripts.html#random-charts",
    "href": "scripts.html#random-charts",
    "title": "Scripts",
    "section": "Random charts",
    "text": "Random charts\n\nBoa constrictor üêç\n\n\n\nCode - Click to view\n# packages ----------------------------------------------------------------\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(geomtextpath)\n\n# data --------------------------------------------------------------------\n\ndata &lt;- data.frame(a = c(2.8,2.8,3.8,2.9,2.8,3,4.5,5.6,5.7,4.4,5.8))\n\nquote &lt;- \"'My drawing was not a picture of a hat. It was a picture of a &lt;i&gt;Boa constrictor&lt;/i&gt; digesting an elephant.'\"\n\nscatter = data.frame(\n  x = runif(10000,-5,18),\n  y = runif(10000,-1,1)\n)\n\n# plot --------------------------------------------------------------------\n\ndata %&gt;% \n  ggplot(aes(x = a))+\n  geom_density(adjust = 1,\n               fill = \"#784707\",\n               color = \"#462e0a\",\n               size = 3)+\n  geom_textdensity(size = 5, fontface = 2, spacing = 30,\n                   vjust = -0.35, hjust = 0.2,\n                   label = quote,\n                   color = \"#462e0a\",\n                   rich = TRUE)+\n  geom_segment(x = -2.5, xend = 12, y = 0, yend = 0,\n               size = 3, color = \"#462e0a\",lineend = \"round\")+\n  geom_point(x = 11.95, y = 0.002, size = 0.5)+\n  annotate(\"text\", x = 12, y = 0, label = \"- The Little Prince by\\nAntoine de Saint-Exup√©ry\\nBruno Mioto - @BrunoHMioto\",\n           hjust = 1, vjust = 1.2, fontface = \"bold\",\n           color = \"#462e0a\")+\n  scale_y_continuous(expand = c(0,0))+\n  scale_x_continuous(limits = c(-2.5,12))+\n  theme_void()+\n  theme(\n    panel.background = element_rect(fill = \"#f7f8f8\", color = NA)\n  )+\n  coord_cartesian(ylim = c(-.4,0.8), xlim = c(-4,13))\n\n\nggsave(\"elephant.png\", width = 10, height = 6)\n\n\n\n\nAlcohol consumption üç∫\n\n\n\nCode - Click to view\n# packages ----------------------------------------------------------------\n\nlibrary(dplyr)\nlibrary(readr)\nlibrary(ggplot2)\nlibrary(elementalist)\nlibrary(janitor)\nlibrary(ggrepel)\nlibrary(rcartocolor)\nlibrary(ggforce)\n\n# data --------------------------------------------------------------------\n\ndata &lt;- read_csv(\"data/alcohol-consumption-by-15-19-year-old-males-vs-females.csv\") %&gt;% \n  clean_names()\n\ncountries &lt;- read_csv(\"data/continents2.csv\") %&gt;%\n  clean_names() %&gt;% \n  select(alpha_3, region)\n\ndata2 &lt;- data %&gt;% \n  rename(male = 4,\n         female = 5) %&gt;% \n  filter(year == 2010,\n         !is.na(male),\n         !is.na(female)) %&gt;% \n  left_join(countries, by = c(\"code\" = \"alpha_3\"))\n\ndata_points &lt;- tibble(\n  x = c(15,38,38),\n  y = c(5,5,28)\n)\n\n# plot --------------------------------------------------------------------\n\ndata2 %&gt;% \n  ggplot(aes(x = female, y = male, \n             color = region))+\n  geom_abline(color = \"grey\")+\n  geom_text_repel(aes(label = ifelse(entity == \"Brazil\",\n                                     entity,\n                                     \"\")),\n                  fontface = \"bold\",\n                  max.overlaps = 40,\n                  min.segment.length = 0,box.padding = 0.6,\n                  show.legend = FALSE)+\n  geom_text_repel(aes(label = ifelse(male &gt; 25| female&gt;10,\n                                     entity,\n                                     \"\")),\n                  fontface = \"bold\",box.padding = 0.3,\n                  max.overlaps = 20,\n                  show.legend = FALSE)+\n  geom_point(alpha = 0.7, \n             aes(\n    size = population_historical_estimates))+\n  annotate(\"text\",\n           x = 30, y = 30, label = paste0(\"\\u2191 Men drink more\\n\\u2193 Women drink more\"),\n           angle = 33,fontface = \"bold\", color = \"grey\")+\n  ggforce::geom_mark_hull(data = data_points, aes(x = x, y = y), color = \"grey20\", fill = \"grey20\",\n                          linetype = \"dashed\",alpha = 0.1)+\n  annotate(\"text\",\n          x = 31.5, y = 11.5, label = \"A better\\nworld?\",\n          lineheight = 0.8,\n          fontface = \"bold\",\n          family = \"Open Sans\",\n          color = \"grey40\")+\n  guides(size = \"none\")+\n  #rcartocolor::scale_color_carto_d(palette = \"Bold\")+\n  scale_color_manual(\n    values = c(\"#7f3c8d\",\n               \"#11a579\",\n               \"#3969ac\",\n               \"#e68310\",\n               \"#e73f74\")\n  )+\n  scale_x_continuous(labels = scales::label_number(scale = 1,suffix = \"L\"),\n                     expand = expansion(mult = c(0,0.05)))+\n  scale_y_continuous(labels = scales::label_number(scale = 1,suffix = \"L\"),\n                     expand = expansion(mult = c(0,0.05)))+\n  labs(\n    title = \"Average alcohol consumption with 15-19 year old, 2010\",\n    subtitle = \"Measured in litres of pure alcohol per year\",\n    x = \"Avg alcohol consumption per capita (Females)\",\n    y = \"Avg alcohol consumption per capita (Males)\",\n    color = \"Continent\",\n    caption = \"Bruno Mioto @BrunoHMioto - Data: WHO, Global Health Observatory (GHO)\"\n  )+\n  theme_classic()+\n  theme(\n    plot.title.position = \"plot\",\n    plot.title = element_text(face = \"bold\"),\n    legend.margin = margin(0,0,0,0,\"pt\"),\n    legend.text = element_text(margin = margin(0,5,0,0, unit = 'pt')),\n    legend.title = element_text(face = \"bold\"),\n    axis.title = element_text(face = \"bold\"),\n    axis.text = element_text(face = \"bold\", angle = c(1,3,-3,-5,6)),\n    legend.position = \"top\",\n    panel.grid.major = element_line_wiggle(2.5),\n    panel.grid.minor = element_line_wiggle(2.5, color = \"#f1f1f1\"),\n    axis.line = element_line_wiggle(3),\n    text = element_text(family = \"Open Sans\")\n  )+\n  coord_cartesian(xlim = c(0,40),\n                  ylim = c(0,40))\n\n\nggsave(\"test12_5.png\", width = 6, height = 5)\n\n\n\n\nPfizer vaccine üíâ\n\n\n\nCode - Click to view\n# packages ----------------------------------------------------------------\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(ggrepel)\nlibrary(extrafont)\nlibrary(readr)\n\n# data --------------------------------------------------------------------\n\ndata &lt;- read_csv(\"https://raw.githubusercontent.com/brunomioto/dataviz/main/pfizer_vaccine/pfizer_vaccine_trial.csv\")\n\n# plot --------------------------------------------------------------------\n\ndata %&gt;% \n  ggplot(aes(x = days_after_dose_1))+\n  #dif\n  geom_segment(aes(x = 110, xend = 110, y = 0.29413854, yend = 2.24653641),\n               color = \"#bdbdbd\",\n               size = 2)+\n  geom_label(aes(x = 110, y = 1.4, label = \"7.6x\"),\n             color = \"#bdbdbd\",\n             fill = \"#fcfcfc\",\n             size = 8,\n             label.padding = unit(10, \"pt\"),\n             label.size = NA,\n             hjust = 0.43)+\n  #placebo\n  geom_step(aes(y = placebo),\n            color = \"#f76833\",\n            size = 1)+\n  geom_point(data = data %&gt;%  \n               distinct(placebo, .keep_all = TRUE),\n             aes(y = placebo),\n             color = \"#f76833\",\n             shape = 21,\n             fill = NA)+\n  geom_text_repel(aes(label = ifelse(days_after_dose_1 == 73, \"Placebo group\",\"\"),\n                      y = placebo),\n                  nudge_x = -5,\n                  box.padding = 0.5,\n                  nudge_y = 0.3,\n                  segment.curvature = 0.1,\n                  segment.ncp = 3,\n                  segment.angle = 20,\n                  fontface = \"bold\",\n                  color = \"#f76833\",\n                  size = 4)+\n  #vaccine\n  geom_step(aes(y = vaccine),\n            color = \"#196299\",\n            size = 1)+\n  geom_point(data = data %&gt;%  \n               distinct(vaccine, .keep_all = TRUE),\n             aes(y = vaccine),\n             color = \"#196299\",\n             shape = 21,\n             fill = NA)+\n  geom_text_repel(aes(label = ifelse(days_after_dose_1 == 96, paste(\"Vaccinated group\\nBNT162b2 (30\\u03bcg)\"),\"\"),\n                      y = vaccine),\n                  nudge_x = -5,\n                  box.padding = 0.5,\n                  nudge_y = 0.3,\n                  segment.curvature = 0.1,\n                  segment.ncp = 3,\n                  segment.angle = 20,\n                  fontface = \"bold\",\n                  color = \"#196299\",\n                  size = 4)+\n  scale_y_continuous(breaks = seq(0,2.4,0.4), expand = expansion(mult = c(0,0.05)))+\n  scale_x_continuous(breaks = seq(0,119,7), expand = expansion(mult = c(0.01,0.02)))+\n  coord_cartesian(ylim = c(0,2.4))+\n  labs(\n    title = \"COVID-19 incidence rates in Pfizer/BioNTech's vaccine trial\",\n    x = \"Days after first dose\",\n    y = \"Cumulative incidence (%)\",\n    caption = \"Chart: Bruno Mioto @BrunoHMioto - Source: New England Journal of Medicine\"\n  )+\n  theme_minimal()+\n  theme(\n    plot.background = element_rect(fill = \"#fcfcfc\", color = NA),\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor = element_blank(),\n    axis.line.x = element_line(),\n    axis.ticks.x = element_line(),\n    axis.title = element_text(face = \"bold\"),\n    axis.text = element_text(face = \"bold\", size = 10),\n    text = element_text(family = \"Open Sans\"),\n    plot.title.position = \"plot\",\n    plot.title = element_text(face = \"bold\", size = 16),\n    plot.margin = margin(10,10,10,10, unit = \"pt\")\n  )\n\nggsave(\"pfizer_trial.png\", width = 10, height = 7)\n\n\n\n\nSpider üï∑Ô∏è\n\n\n\nCode - Click to view\n# packages ----------------------------------------------------------------\n\nlibrary(readr)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(ggtext)\nlibrary(ggthemes)\nlibrary(nflplotR) #we can use ggpath now\n\n# data --------------------------------------------------------------------\n\ndata &lt;- read_csv(\"species_export_20220408.csv\")\n\n# plot --------------------------------------------------------------------\n\n#point\nplot &lt;- data %&gt;% \n  group_by(year) %&gt;% \n  count() %&gt;% \n  ungroup() %&gt;% \n  mutate(cum_sum = cumsum(n)) %&gt;% \n  ggplot(aes(x = year, y = cum_sum))+\n  geom_line(color = \"grey50\")+\n  geom_point(\n    aes(color = ifelse(year == 2022, \"#735133\", \"grey50\"))\n  )+\n  annotate(\n    geom = \"curve\", x = 1950, y = 45000, xend = 2022, yend = 50000, \n    curvature = -.2,\n    color = \"#735133\"\n  ) +\n  geom_richtext(x = 1950, \n                y = 40000, \n                size = 4.5,\n                color = \"#735133\",\n                label.color = NA,\n                fill = \"#f0f0f0\",\n                label = \"&lt;i&gt;Guriurius minuano&lt;/i&gt;&lt;br&gt;Marta, Bustamante, Ruiz &&lt;br&gt;Rodrigues, 2022\"\n  )+\n  annotate(\n    nflplotR::GeomFromPath,\n    x = 1787, y = 40000,\n    path = \"./spider_picture.png\",\n    width = 0.2\n  ) +\n  scale_color_identity()+\n  scale_y_continuous(expand = expansion(mult = c(0.02,0.02)),\n                     labels = scales::unit_format(big.mark = \",\", unit = \"\"))+\n  scale_x_continuous(breaks = c(seq(1750, 2022, 25),2022))+\n  labs(\n    title = \"The world of spiders: The 50,000th species described!\",\n    x = \"Year\",\n    y = \"Number of species\",\n    caption = \"Data: World Spider Catalog\\nFigure:  Marta, Bustamante, Ruiz & Rodrigues (2022)\"\n  )+\n  theme_fivethirtyeight() +\n  theme(\n    panel.grid.minor.y = element_blank(),\n    axis.title = element_text(face = \"bold\"),\n    plot.title.position = \"plot\",\n    axis.title.x = element_text(margin = margin(5,0,-5,0)),\n    plot.caption = element_text(margin = margin(0,0,0,0))\n  )+\n  coord_cartesian(ylim = c(0,NA))\n\n\n\n\nStar Wars üåå\n\n\n\nCode - Click to view\n# packages ----------------------------------------------------------------\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(readr)\nlibrary(ggfx)\n\n# data --------------------------------------------------------------------\n\ndata &lt;- dplyr::starwars\n\nlist_char &lt;- c(\"Luke Skywalker\",\n               \"Darth Vader\",\n               \"Obi-Wan Kenobi\",\n               \"Yoda\",\n               \"Mace Windu\",\n               \"Leia Organa\")\n\ndata2 &lt;- data %&gt;%\n  mutate(height = height/100)\n\n# plot --------------------------------------------------------------------\n\nplot &lt;- data2 %&gt;% \n  ggplot(aes(x = height, y = height))+\n    #Yoda\n    with_outer_glow(\n      geom_segment(data=filter(data2,name == \"Yoda\"),\n                   aes(x = 0, xend = height, yend = name, y = name),\n                   color = \"#ffffff\",\n                   size = 3,\n                   lineend = \"round\"),\n      colour = \"#02fe2c\",\n      sigma = 20,\n      expand = 10\n    )+ \n    #Leia\n    with_outer_glow(\n      geom_segment(data=filter(data2,name == \"Leia Organa\"),\n                   aes(x = 0, xend = height, yend = name, y = name),\n                   color = \"#ffffff\",\n                   size = 3,\n                   lineend = \"round\"),\n      colour = \"#006be4\",\n      sigma = 20,\n      expand = 10\n    )+ \n    #luke\n    with_outer_glow(\n      geom_segment(data=filter(data2,name == \"Luke Skywalker\"),\n                   aes(x = 0, xend = height, yend = name, y = name),\n                   color = \"#ffffff\",\n                   size = 3,\n                   lineend = \"round\"),\n      colour = \"#02fe2c\",\n      sigma = 20,\n      expand = 10\n    )+\n    #Obi-Wan Kenobi\n    with_outer_glow(\n      geom_segment(data=filter(data2,name == \"Obi-Wan Kenobi\"),\n                   aes(x = 0, xend = height, yend = name, y = name),\n                   color = \"#ffffff\",\n                   size = 3,\n                   lineend = \"round\"),\n      colour = \"#006be4\",\n      sigma = 20,\n      expand = 10\n    )+ \n    #Mace Windu\n    with_outer_glow(\n      geom_segment(data=filter(data2,name == \"Mace Windu\"),\n                   aes(x = 0, xend = height, yend = name, y = name),\n                   color = \"#ffffff\",\n                   size = 3,\n                   lineend = \"round\"),\n      colour = \"#d413ef\",\n      sigma = 20\n    )+\n    #darth vader\n    with_outer_glow(\n      geom_segment(data=filter(data2,name == \"Darth Vader\"),\n                   aes(x = 0, xend = height, yend = name, y = name),\n                   color = \"#ffffff\",\n                   size = 3,\n                   lineend = \"round\"),\n      colour = \"#e00301\",\n      sigma = 30,\n      expand = 10\n    )+\n    labs(\n      title = \"Height of some Star Wars characters\",\n      x = \"Height, m\",\n      caption = \"Bruno Mioto - @BrunoHMioto\"\n    )+\n    scale_x_continuous(expand = expansion(mult = c(0,0.05)))+\n    scale_y_discrete(limits = c(\"Yoda\",\n                                \"Leia Organa\",\n                                \"Luke Skywalker\",\n                                \"Obi-Wan Kenobi\",\n                                \"Mace Windu\",\n                                \"Darth Vader\"))+\n    theme_minimal()+\n    theme(\n      plot.background = element_rect(fill = \"black\"),\n      panel.background = element_rect(fill = \"black\"),\n      panel.grid.major.y = element_line(linetype = \"dashed\", color = \"grey\"),\n      panel.grid.minor.y = element_blank(),\n      panel.grid.major.x = element_blank(),\n      plot.title.position = \"plot\",\n      plot.title = element_text(size = rel(1.5)),\n      text = element_text(color = \"white\", face = \"bold\"),\n      axis.text = element_text(color = \"white\"),\n      axis.title.x = element_blank(),\n      axis.text.x = element_text(angle = 90,vjust = 0.5, hjust = 1)\n    )+\n  coord_flip()\n\n\nggsave(plot = plot, \"starwars_height_flip.png\", height = 10, width = 5)\n\n\n\n\nCopacabana üèñÔ∏è\n\n\n\nCode - Click to view\n# packages ----------------------------------------------------------------\n\nlibrary(tidyverse)\nlibrary(ggforce)\nlibrary(patchwork)\n\n# data --------------------------------------------------------------------\n\ncol_1 &lt;- c(\"a\", \"b\", \"c\", \"d\")\ncol_2 &lt;- c(\"e\", \"f\", \"g\", \"h\")\ncol_3 &lt;- c(\"i\", \"j\", \"k\", \"l\")\nvalue &lt;- c(0, 5, 5, 5)\n\ndf &lt;- data.frame(col_1, col_2, col_3, value)\n\ndf &lt;- gather_set_data(df, 1:3)\n\ndf$y &lt;- factor(df$y, levels = c(\"a\", \"b\", \"c\", \"d\",\n                                \"f\", \"g\", \"h\", \"e\",\n                                \"i\", \"j\", \"k\", \"l\"\n                                ))\n\n# plot -------------------------------------------------\n\na &lt;- df %&gt;%\n  ggplot(aes(x, id = id, split = y, value = value)) +\n  geom_parallel_sets(\n    fill = \"black\",\n    axis.width = 0,\n    sep = 0.5,\n    strength = 0.7\n  ) +\n  geom_parallel_sets_axes(axis.width = 0) +\n  scale_y_continuous(expand = c(0, 0)) +\n  scale_x_discrete(expand = c(0, 0)) +\n  theme_void()\n\n# copacabana ------------------------------------------\n\n(a|a|a|a|a)/(a|a|a|a|a)\n\nggsave(\"copacabana3.png\", width = 6, height = 6)\n\n\n\n\nEye üëÅÔ∏è\n\n\n\nCode - Click to view\n# packages ----------------------------------------------------------------\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(ggforce)\nlibrary(ggnewscale)\n\n# data --------------------------------------------------------------------\n\ndata &lt;- data.frame(x = runif(1000),\n                   y = runif(1000))\n\ncircle &lt;- data.frame(\n  x0 = 0.1,\n  y0 = 0.9,\n  r = 0.06\n)\n\n# plot --------------------------------------------------------------------\n\neye &lt;- ggplot(data)+\n  #fundo\n  geom_tile(aes(x = 0.5, y=1, fill = y)) +\n  scale_fill_gradient2(low = '#ffffff', mid = \"#f3f1f4\", high = '#e8e4e9',\n                       midpoint = 0.6) +\n  ggnewscale::new_scale_fill()+\n  #iris fundo\n  geom_tile(aes(x = 0.5, y=0.5, fill = y)) +\n  scale_fill_gradient2(low = '#2b5a74', mid = '#08303c', high = '#08303c',\n                       midpoint = 0.8) +\n  #iris linha\n  geom_line(aes(x,y,color = y))+\n  scale_color_gradient(low = \"#412808\", high = \"#ad8d6d30\")+\n  #contorno\n  geom_hline(yintercept = 1.5, size = 1.2)+\n  ggnewscale::new_scale_fill()+\n  #pupila\n  geom_rect(xmin = 0, xmax = 1, ymin = 0, ymax = 0.4,\n            fill = \"#000000\")+\n  #reflexo\n  geom_circle(data = circle, aes(x0 = x0, y0 = y0, r = r, fill = r),\n              fill = \"#ffffff\")+\n  scale_y_continuous(limits = c(0,1.5))+\n  coord_polar()+\n  theme_void()+\n  theme(\n    legend.position = \"none\",\n    plot.background = element_rect(fill = \"white\", color = NA)\n  )\n\n# save --------------------------------------------------------------------\n\nggsave(plot = eye, \"eye.png\", width = 6, height = 6)\n\n\n\n\nUS Nuclear Tests üí£Ô∏è\n\n\n\nCode - Click to view\n# packages ----------------------------------------------------------------\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(ggfx)\nlibrary(ggpath)\n\n# data --------------------------------------------------------------------\n\nnuclear_tests &lt;- read.csv(\"https://raw.githubusercontent.com/owid/notebooks/main/BastianHerre/nuclear_weapons/Arms%20Control%20Association%20(2020)%20nuclear%20weapons%20tests/nuclear_weapons_tests_states.csv\")\n\nusa_tests &lt;- nuclear_tests %&gt;% \n  filter(country_name == \"United States\") %&gt;% \n  group_by(year) %&gt;% \n  count(wt = nuclear_weapons_tests)\n\n# plot --------------------------------------------------------------------\n\nusa_tests %&gt;% \n  ggplot(aes(x = year, y = n))+\n  #1st bomb\n  annotate(\n    \"curve\",\n    x = 1944.5, xend = 1944,\n    y = 2, yend = 28,\n    color = \"white\",\n    curvature = -0.3\n  )+\n  annotate(\n    \"text\",\n    x = 1948,\n    y = 32,\n    label = \"'Trinity' was the first\\nUS bomb to be tested\",\n    family = \"Open Sans\",\n    lineheight = 0.85,\n    color = \"white\"\n  )+\n  #moratorium \n  annotate(\n    \"rect\",\n    xmin = 1958.5, xmax = 1960.5,\n    ymin = -Inf, ymax = 102,\n    fill = \"#cbcbc2\",\n    alpha = 0.3\n  )+\n  annotate(\n    \"label\",\n    x = 1951,\n    y = 87.5,\n    label = \"URSS, UK, and the US\\nagreed to a moratorium\\non nuclear weapon tests in 1958\",\n    size = 3,\n    family = \"Open Sans\",\n    lineheight = 0.87,\n    color = \"white\",\n    fill = \"#171515\",\n    label.size = NA,\n  )+\n  annotate(\n    \"curve\",\n    x = 1955, xend = 1958.3,\n    y = 92, yend = 95,\n    color = \"white\",\n    curvature = -0.2,\n    linewidth = 0.3\n  )+\n  #record\n  annotate(\n    \"label\",\n    x = 1975,\n    y = 93,\n    label = \"After the moratorium was broken in August 1961,\\nthe US tested 96 nuclear bombs in 1962\",\n    size = 3.5,\n    family = \"Open Sans\",\n    lineheight = 0.87,\n    color = \"white\",\n    fill = \"#171515\",\n    label.size = NA,\n  )+\n  #last test\n  annotate(\n    \"label\",\n    x = 1988,\n    y = 31.25,\n    label = \"Following intense public pressure,\\nthe US adheres to a testing\\nmoratorium in 1992\",\n    size = 3,\n    family = \"Open Sans\",\n    lineheight = 0.87,\n    color = \"white\",\n    fill = \"#171515\",\n    label.size = NA,\n  )+\n  annotate(\n    \"curve\",\n    x = 1992, xend = 1993,\n    y = 7, yend = 28,\n    color = \"white\",\n    curvature = 0.2,\n    linewidth = 0.3\n  )+\n  #tests label\n  annotate(\n    \"label\",\n    x = 1942,\n    y = 100,\n    label = \"tests\",\n    hjust = 0,\n    vjust = 0.45,\n    label.size = NA,\n    fill = \"#171515\",\n    color = \"white\",\n    family = \"Open Sans\",\n    fontface = \"bold\"\n  )+\n  geom_from_path(\n    path = \"https://upload.wikimedia.org/wikipedia/commons/a/ae/Nuclear_symbol.svg\",\n    x = 1994,\n    y = 107,\n    width = 0.07,\n    stat = \"unique\"\n  )+\n  with_outer_glow(\n    geom_col(fill = \"#fefb8c\"),\n    colour = \"#cb3200\",\n    sigma = 60\n  )+\n  scale_y_continuous(\n    expand = expansion(mult = c(0,0.05)),\n  )+\n  labs(\n    title = \"Number of nuclear weapons tests by the United States\",\n    caption = \"Bruno Mioto @BrunoHMioto - data: Arms Control Association (2020)\"\n  )+\n  theme_grey(base_family = \"Open Sans\")+\n  theme(\n    plot.margin = margin(10,10,10,10,\"pt\"),\n    plot.title.position = \"plot\",\n    plot.title = element_text(face = \"bold\", \n                              size = 16,\n                              color = \"white\"),\n    plot.caption = element_text(color = \"white\"),\n    plot.background = element_rect(fill = \"#171515\", color = NA),\n    panel.background = element_blank(),\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor.x = element_blank(),\n    panel.grid.major.y = element_line(color = \"#cbcbc2\"),\n    panel.grid.minor.y = element_line(color = \"#cbcbc2\",\n                                      linetype = \"dashed\"),\n    axis.ticks = element_blank(),\n    axis.text = element_text(color = \"white\",\n                             face = \"bold\"),\n    axis.text.y = element_text(size = 10),\n    axis.title = element_blank()\n  )+\n  coord_cartesian(xlim = c(1945, 1993),\n                  ylim = c(0,100),\n                  clip = \"off\")\n\n# save --------------------------------------------------------------------\n\nggsave(\"figures/us_nuclear_tests.png\", width = 8, height = 6, dpi = 600)"
  },
  {
    "objectID": "scripts.html#nfl-charts",
    "href": "scripts.html#nfl-charts",
    "title": "Scripts",
    "section": "NFL Charts üèà",
    "text": "NFL Charts üèà\n\nTime to throw ‚è±Ô∏è\n\n\n\nCode - Click to view\n# packages ----------------------------------------------------------------\n\nlibrary(nflreadr)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(nflplotR)\nlibrary(ggh4x)\nlibrary(ggbeeswarm)\n\n# data --------------------------------------------------------------------\n\ntt &lt;- nflreadr::load_nextgen_stats(stat_type = \"passing\",seasons = 2022) %&gt;%\n  mutate(team_abbr = ifelse(team_abbr == \"LAR\", \"LA\", team_abbr))\n\n\ntt_qbs &lt;- tt %&gt;%\n  filter(week == 0) %&gt;%\n  group_by(team_abbr) %&gt;%\n  arrange(desc(attempts)) %&gt;%\n  slice_head() %&gt;%\n  select(player_display_name, team_abbr, player_gsis_id) %&gt;%\n  ungroup()\n\ntt_top &lt;- tt %&gt;%\n  filter(player_gsis_id %in% tt_qbs$player_gsis_id,\n         (player_display_name != \"Baker Mayfield\" | team_abbr != \"CAR\")\n         )\n\ntt_avg &lt;- tt %&gt;%\n  summarise(avg = mean(avg_time_to_throw))\n\ntt_all &lt;- nflreadr::load_nextgen_stats(stat_type = \"passing\", seasons = 2016:2022) %&gt;%\n  mutate(team_abbr = ifelse(team_abbr == \"LAR\", \"LA\", team_abbr))\n\ntt_all2 &lt;- tt_all %&gt;%\n  filter(player_gsis_id %in% tt_top$player_gsis_id,\n         week != 0) %&gt;%\n  group_by(player_gsis_id) %&gt;%\n  arrange(desc(season)) %&gt;%\n  mutate(team_abbr = ifelse(season == 2022, team_abbr, NA)) %&gt;%\n  tidyr::fill(team_abbr) %&gt;%\n  filter(season != 2022) %&gt;%\n  ungroup() %&gt;%\n  add_row(team_abbr = \"PIT\")\n\n\ntt_top$team_abbr2 &lt;- nfl_team_factor(tt_top$team_abbr)\ntt_all2$team_abbr2 &lt;- nfl_team_factor(tt_all2$team_abbr)\n\n# tt_top %&gt;%\n#   filter(week == 0) %&gt;%\n#   select(player_display_name, team_abbr) %&gt;%\n#   clipr::write_clip()\n\n\nlabel_names &lt;- c(\n  \"MIA\" = \"Tua Tagovailoa\",\n  \"LV\" = \"Derek Carr\",\n  \"NYJ\" = \"Zach Wilson\",\n  \"NYG\" = \"Daniel Jones\",\n  \"BUF\" = \"Josh Allen\",\n  \"DAL\" = \"Dak Prescott\",\n  \"SF\" = \"Jimmy Garoppolo\",\n  \"PIT\" = \"Kenny Pickett\",\n  \"TEN\" = \"Ryan Tannehill\",\n  \"PHI\" = \"Jalen Hurts\",\n  \"ARI\" = \"Kyler Murray\",\n  \"CAR\" = 'Sam Darnold',\n  \"HOU\" = \"Davis Mills\",\n  \"NE\" = \"Mac Jones\",\n  \"LAC\" = \"Justin Herbert\",\n  \"BAL\" = \"Lamar Jackson\",\n  \"IND\" = \"Matt Ryan\",\n  \"MIN\" = \"Kirk Cousins\",\n  \"JAX\" = \"Trevor Lawrence\",\n  \"SEA\" = \"Geno Smith\",\n  \"WAS\" = \"Carson Wentz\",\n  \"LA\" = \"Baker Mayfield\",\n  \"KC\" = \"Patrick Mahomes\",\n  \"GB\" = \"Aaron Rodgers\",\n  \"TB\" = \"Tom Brady\",\n  \"CLE\" = \"Jacoby Brissett\",\n  \"NO\" = \"Andy Dalton\",\n  \"ATL\" = \"Marcus Mariota\",\n  \"CHI\" = \"Justin Fields\",\n  \"DEN\" = \"Russell Wilson\",\n  \"DET\" = \"Jared Goff\",\n  \"CIN\" = \"Joe Burrow\"\n\n)\n\n# plot --------------------------------------------------------------------\n\ng &lt;- tt_top %&gt;%\n  ggplot(aes(x = avg_time_to_throw, y = player_display_name))+\n  nflplotR::geom_nfl_logos(aes(team_abbr = team_abbr2), width = 0.4,\n                           stat = \"unique\",\n                           alpha = 0.2,\n                           x = 3.7, y = 1)+\n  geom_beeswarm(data = tt_all2 %&gt;% filter(week != 0),\n                size = 2.8,\n                alpha = 0.2,\n                shape = 16,\n                cex= 4,\n                priority='random',\n                color = \"grey50\")+\n  geom_vline(data = tt_avg,\n             aes(xintercept = avg),\n             color = \"#0570b0\",\n             linetype = \"dashed\")+\n  geom_vline(data = . %&gt;% filter(week == 0),\n             aes(xintercept = avg_time_to_throw))+\n  geom_beeswarm(data = . %&gt;% filter(week != 0),\n                size = 2.5,\n                cex=4,\n                priority='random',\n                shape = 21,\n                aes(color = team_abbr2,\n                    fill = team_abbr2))+\n  geom_text(data = . %&gt;% filter(week == 0),\n            x = 1.9, y = 1.4,\n            hjust = 0,\n            family = \"Open Sans\",\n            aes(label = paste0(scales::number(avg_time_to_throw,accuracy = 0.01),\" s\")))+\n  scale_color_nfl(type = \"secondary\")+\n  scale_fill_nfl(type = \"primary\")+\n  facet_wrap2(team_abbr2~.,\n              labeller = as_labeller(label_names),\n              scales = \"free_y\",\n              axes = \"x\",\n              remove_labels = \"x\",\n              ncol = 4)+\n  labs(\n    title = \"Average time to throw for each QB - 2022 Regular season\",\n    subtitle = glue::glue(\"Current season highlighted - QB with most attempts per team. NFL 2022 season average ({round(tt_avg$avg,2)} sec) in blue.\"),\n    caption = \"Bruno Mioto @BrunoHMioto - Data: Next Gen Stats with nflreadr\"\n  )+\n  theme_classic()+\n  theme(\n    text = element_text(family = \"Open Sans\"),\n    plot.title.position = \"plot\",\n    plot.title = element_text(face = \"bold\", size = 18),\n    plot.subtitle = element_text(face = \"bold\"),\n    axis.text.x = element_text(face = \"bold\"),\n    axis.text.y = element_blank(),\n    axis.title = element_blank(),\n    axis.ticks.y = element_blank(),\n    axis.ticks.x = element_line(color = \"black\", size = 0.8),\n    axis.line.y = element_blank(),\n    axis.line.x = element_line(size = 0.8),\n    panel.grid.major.x = element_line(),\n    plot.background = element_rect(fill = \"#f0f0f0\"),\n    strip.background = element_blank(),\n    strip.text = element_text(face = \"bold\", size = 10)\n  )\n\n\nggsave(plot = g, \"ttt_2022_season_logo.png\", width = 9, height = 9)\n\n\n\n\nPlayers by draft round üéüÔ∏è\n\n\n\nCode - Click to view\n# packages ----------------------------------------------------------------\n\nlibrary(readr)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(nflplotR)\nlibrary(nflfastR)\nlibrary(ggchicklet)\nlibrary(ggh4x)\n\n# data --------------------------------------------------------------------\n\nurl &lt;- \"https://raw.githubusercontent.com/ajreinhard/NFL-public/main/misc-data/2013_to_2022_init53.csv\"\n\nrosters &lt;- read_csv(url)\n\nroster_2022 &lt;- rosters %&gt;% \n  filter(season == 2022) %&gt;% \n  mutate(draft_rnd = ifelse(draft_type == \"Undrafted\",\"UFA\",draft_rnd))\n\nround_players &lt;- roster_2022 %&gt;% \n  count(team, draft_rnd) %&gt;% \n  left_join(nflfastR::teams_colors_logos,\n          by = c(\"team\" = \"team_abbr\"))\n\n\nround_players$team &lt;- nfl_team_factor(round_players$team)\n\nround_players$team_division &lt;- factor(round_players$team_division,\n                                      levels = c(\"AFC West\",\"AFC North\",\"AFC South\",\"AFC East\",\n                                                 \"NFC West\",\"NFC North\",\"NFC South\",\"NFC East\"))\n\nround_players$draft_rnd &lt;- factor(round_players$draft_rnd,\n       levels = c(\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"UFA\"))\n\n# plot --------------------------------------------------------------------\n\nround_players %&gt;% \n  ggplot(aes(x = team, y = n, fill = draft_rnd))+\n  geom_chicklet()+\n  geom_text(position = position_stack(vjust = 0.5,reverse = TRUE),\n            aes(label = ifelse(n &gt; 2, n, \"\")),\n            color = \"white\")+\n  facet_wrap2(~team_division, ncol = 4, scales = \"free_y\", axes = \"all\")+\n  scale_y_continuous(breaks = seq(0,50,10),\n                     expand = c(0,0))+\n  scale_fill_manual(\n    values = c('#dc3913',\n               '#3366cc',\n               '#0f9618',\n               '#992299',\n               '#0099c6',\n               '#dd4477',\n               '#e67300',\n               '#737373')\n  )+\n  labs(\n    title = \"Number of players of each team by draft round in the 2022 season\",\n    fill = \"Draft round\",\n    caption = \"Bruno Mioto @BrunoHMioto - Data: TheFootballDB by @reinhurdler\"\n  )+\n  guides(fill = guide_legend(nrow = 1,\n                             label.position = \"bottom\"))+\n  theme_minimal()+\n  theme(\n    plot.title = element_text(size = rel(1.5), face = \"bold\"),\n    plot.title.position = \"plot\",\n    plot.background = element_rect(fill = \"white\", color = NA),\n    plot.margin = margin(15,15,15,15,unit = \"pt\"),\n    legend.title = element_text(face = \"bold\"),\n    axis.text.y = element_nfl_logo(size = 0.7),\n    axis.title = element_blank(),\n    legend.position = \"top\",\n    legend.spacing.x = unit(0.1, 'cm'),\n    legend.spacing.y = unit(0, 'cm'),\n    legend.key.height =  unit(1, \"cm\"),\n    legend.box.margin = margin(-5,0,-10,0,unit = \"pt\"),\n    panel.grid.major.y = element_blank(),\n    panel.grid.minor.x = element_blank(),\n    panel.grid.major.x = element_line(color = \"#999999\"),\n    strip.text = element_text(size = rel(1.2),\n                              face = \"bold\"),\n    text = element_text(family = \"Open Sans\")\n  )+\n  coord_flip()\n\nggsave(\"rnd_players_2022.png\", width = 10, height = 6)\n\n\n\n\nEarly-Late downs QBs slope üöÄ\n\n\n\nCode - Click to view\n# packages ----------------------------------------------------------------\n\nlibrary(nflreadr)\nlibrary(nflplotR)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(ggrepel)\nlibrary(tidyr)\nlibrary(ggtext)\n\n# data --------------------------------------------------------------------\n\npbp &lt;- load_pbp(seasons = 2022)\nrosters &lt;- load_rosters(2022)\n\nsnap_counts &lt;- nflreadr::load_snap_counts()\n\nsnap_counts_topQB &lt;- snap_counts %&gt;%\n  filter(position == \"QB\") %&gt;%\n  group_by(team, player, pfr_player_id) %&gt;%\n  summarise(total_off_snaps = sum(offense_snaps)) %&gt;%\n  filter(!pfr_player_id %in% c(\"RushCo00\")) %&gt;%\n  group_by(team) %&gt;%\n  arrange(desc(total_off_snaps)) %&gt;%\n  slice_head()\n\nqb_active &lt;- rosters %&gt;%\n  filter((pfr_id %in% c(snap_counts_topQB$pfr_player_id))|\n           gsis_id == \"00-0038102\" #Kenny Pickett\n  )\n\nQB_EPA &lt;- pbp %&gt;%\n  filter(!is.na(qb_epa),\n         passer_id %in% qb_active$gsis_id,\n         qb_dropback == 1,\n         down &lt;= 4\n  ) %&gt;%\n  mutate(down_type = ifelse(down %in% c(1,2), \"early\", \"late\")) %&gt;%\n  group_by(name, passer_id, posteam, season, down_type) %&gt;%\n  summarize(tot_epa = sum(qb_epa),\n            mean_epa = mean(qb_epa),\n            n = n()) %&gt;%\n  ungroup() %&gt;%\n  left_join(rosters, by = c(\"passer_id\" = \"gsis_id\"))\n\nQB_EPA_better &lt;- QB_EPA %&gt;%\n  select(-c(tot_epa,n)) %&gt;%\n  pivot_wider(\n    names_from = down_type,\n    values_from = mean_epa\n  ) %&gt;%\n  pull(name)\n\n# plot --------------------------------------------------------------------\n\nQB_EPA %&gt;%\n  ggplot(aes(x = down_type, y = mean_epa, color = posteam, group = posteam))+\n  annotate(\n    \"segment\",\n    x = -Inf, xend = 2,\n    y = seq(-0.4,0.8,0.2), yend = seq(-0.4,0.8,0.2),\n    color = \"#d1d1d1\",\n    linetype = \"dashed\",\n    linewidth = 0.4)+\n  geom_vline(xintercept = c(1,2))+\n  geom_line(data = . %&gt;% filter(!name %in% QB_EPA_better),\n            color = \"grey\")+\n  geom_point(data = . %&gt;% filter(!name %in% QB_EPA_better),\n             color = \"grey\",\n             shape = 21,\n             fill = \"white\")+\n  geom_text_repel(data = . %&gt;% filter(down_type == \"late\",\n                                      name %in% QB_EPA_better),\n                  aes(x = 2,\n                      label = last_name),\n                  nudge_x = 0.05,\n                  hjust = 0,\n                  direction = \"y\",\n                  min.segment.length = unit(8,\"pt\"),\n                  fontface = \"bold\",\n                  family = \"Open Sans\"\n  )+\n  geom_line(data = . %&gt;% filter(name %in% QB_EPA_better),\n            linewidth = 1)+\n  geom_point(data = . %&gt;% filter(name %in% QB_EPA_better),\n             shape = 21,\n             size = 2,\n             fill = \"white\")+\n  annotate(\n    \"text\",\n    x = 1.5, y =0.46, angle = 35,\n    label = \"Better on late downs\"\n  )+\n  annotate(\n    \"text\",\n    x = 1.5, y = -0.31, angle = -32,\n    label = \"Worse on late downs\",\n    color = \"grey\"\n  )+\n  scale_x_discrete(\n    expand = expansion(mult = c(0.2,0.4)),\n    labels = c(\n      \"Early Downs\\n(1st/2nd)\",\n      \"Late Downs\\n(3rd/4th)\"\n    )\n  )+\n  scale_y_continuous(\n    breaks = seq(-1,1,0.2)\n  )+\n  scale_color_nfl()+\n  labs(\n    title = \"&lt;span style='color:#E31837'&gt;Mahomes&lt;/span&gt; and &lt;span style='color:#008E97'&gt;Tua&lt;/span&gt; are another level for late downs\",\n    y = \"EPA/dropback\",\n    caption = \"Bruno Mioto @BrunoHMioto - data: @nflverse\"\n  )+\n  theme_minimal()+\n  theme(\n    text = element_text(family = \"Open Sans\"),\n    plot.title = element_markdown(size = 13, face = \"bold\"),\n    plot.title.position = \"plot\",\n    plot.background = element_rect(fill = \"#f1f1f1\", color = NA),\n    axis.title.x = element_blank(),\n    axis.text.x = element_text(face = \"bold\"),\n    panel.grid = element_blank()\n  )\n\nggsave(\"slope_early_late_downs.png\", width = 5, height = 6)\n\n\n\n\nMahomes Scale üìê\n\n\n\nCode - Click to view\n# packages ----------------------------------------------------------------\n\nlibrary(dplyr)\nlibrary(nflreadr)\nlibrary(nflplotR)\nlibrary(ggplot2)\nlibrary(ggrepel)\nlibrary(tidyr)\nlibrary(elementalist)\nlibrary(stringr)\nlibrary(scales)\n\n# data --------------------------------------------------------------------\n\npbp &lt;- nflreadr::load_pbp(seasons = c(2018:2022))\n\nQB_data &lt;- pbp %&gt;%\n  dplyr::filter(\n    !is.na(qb_epa),\n    qb_dropback == 1,\n    down &lt;= 4\n    ) %&gt;%\n  dplyr::mutate(down_var = ifelse(down &lt;= 2, \n                                  \"early\", \n                                  \"late\")\n                ) %&gt;% \n  dplyr::group_by(name, \n                  passer_id, \n                  posteam, \n                  down_var\n                  ) %&gt;% \n  dplyr::summarize(\n    mean_epa = mean(qb_epa),\n    n = n()\n    ) %&gt;% \n  dplyr::filter(n &gt;= 100) %&gt;% \n  tidyr::pivot_wider(\n    names_from = down_var,\n    values_from = c(mean_epa,n)\n    ) %&gt;% \n  dplyr::filter(\n    !is.na(mean_epa_early),\n    !is.na(mean_epa_late)\n    ) %&gt;% \n  dplyr::mutate(\n    n_combined = n_early+n_late,\n    name = stringr::str_extract(name, \"(?&lt;=\\\\.).*\")\n    )\n\n# plot --------------------------------------------------------------------\n\n# to ggrepel with bubble size work\nmy_pal &lt;- function(range = c(1,6)) {\n  force(range)\n  function(x) scales::rescale(x, to = range, from = c(0, 1))\n}\n\nQB_data %&gt;% \n  ggplot(aes(x = mean_epa_early, y = mean_epa_late))+\n  geom_hline(yintercept = 0, linetype = \"dashed\",\n             color = \"grey30\")+\n  geom_vline(xintercept = 0, linetype = \"dashed\",\n             color = \"grey30\")+\n  geom_path(aes(x = c(0:0.1), y = c(0:0.2)),\n            color = \"blue\")+\n  geom_point(aes(fill = posteam, color = posteam, \n                 size = n_combined),\n             shape = 21)+\n  continuous_scale(\n    aesthetics = c(\"size\", \"point.size\"), scale_name = \"size\",\n    palette = my_pal(c(2,6)),\n    guide = guide_legend(override.aes = list(label = \"\")) # hide \"a\" in legend\n  ) +\n  geom_text_repel(aes(label = name,\n                      point.size = n_combined,\n                      fontface = ifelse(name == \"Mahomes\", \"bold\", \"plain\")),max.time = 5,\n                  max.overlaps = 7)+\n  scale_x_continuous(breaks = seq(-0.5,0.5,0.1),\n                     limits = c(-0.02,NA))+\n  scale_y_continuous(breaks = seq(-0.5,0.5,0.1),\n                     limits = c(-0.21,NA))+\n  scale_fill_nfl(\"primary\")+\n  scale_color_nfl(\"secondary\")+\n  labs(\n    title = \"Introducing the Mahomes Scale\",\n    subtitle = \"For players breaking records and charts (2018-2022 min. 100 dropbacks)\",\n    caption = \"Bruno Mioto @BrunoHMioto - data: nflfastR\",\n    x = \"EPA/Play on early downs (1st&2nd)\",\n    y = \"EPA/Play on late downs (3rd&4th)\"\n  )+\n  theme_classic()+\n  theme(\n    text = element_text(family = \"Open Sans\"),\n    axis.line = element_line(linewidth = 1),\n    axis.line.x = element_line_multicolour(c(\"black\", \"black\", \"black\",\"black\",\"black\",\"black\", \"#E31837\"),\n                                           size = 1),\n    axis.line.y = element_line_multicolour(c(\"black\", \"black\", \"#E31837\", \"#E31837\"),\n                                           size = 1),\n    axis.text = element_text(face = \"bold\", color = \"black\"),\n    axis.text.y = element_text(color = c(rep(\"black\",4),\"#d02138\",\"#e31d3b\",\"#E31837\")),\n    axis.ticks.y = element_line(color = c(rep(\"black\",4),\"#d02138\",\"#e31d3b\",\"#E31837\")),\n    axis.ticks.x = element_line(color = \"black\"),\n    axis.title = element_text(face = \"bold\"),\n    panel.grid.major.x = element_line(color = \"#dddddd\"),\n    panel.grid.major.y = element_line(color = c(\"#E3A3AD\",\"#E38A98\",\"#E36679\",\"#dddddd\",\"#dddddd\",\"#dddddd\", \"#dddddd\")),\n    plot.title = element_text(face = \"bold\", size = 18),\n    plot.title.position = \"plot\",\n    plot.background = element_rect(fill = \"#f1f1f1\", color = NA),\n    panel.background = element_rect(fill = NA, color = NA),\n    legend.position = \"none\"\n  )+\n  coord_cartesian(xlim = c(-0.02,NA),\n                  ylim = c(-0.2,NA))\n\n\nggsave(\"figures/mahomes_scale.png\", width = 8, height = 6.5)\n\n\n\n\nEPA&CPOE Scatterplot üí´\n\n\n\nCode - Click to view\n# packages ----------------------------------------------------------------\n\nlibrary(dplyr)\nlibrary(nflreadr)\nlibrary(nflplotR)\nlibrary(ggplot2)\nlibrary(ggdensity)\nlibrary(ggforce)\nlibrary(ggrepel)\nlibrary(ggtext)\nlibrary(ggthemes)\n\n# data --------------------------------------------------------------------\n\npbp_2006_2009 &lt;- progressr::with_progress(load_pbp(seasons = 2006:2009))\n\npbp_2010_2022 &lt;- progressr::with_progress(load_pbp(seasons = 2010:2022))\n\npbp_all &lt;- pbp_2006_2009 %&gt;% \n  bind_rows(pbp_2010_2022)\n\nplayers &lt;- load_players()\n\npasserID &lt;- \"00-0033873\" #P. Mahomes\n\nQB_CPOE &lt;- pbp_all %&gt;% \n  filter(!is.na(cpoe),\n         !is.na(passer_id),\n         down &lt;= 4,\n         game_half != \"Overtime\") %&gt;% \n  group_by(game_id, game_half, passer_id) %&gt;% \n  mutate(rows = n()) %&gt;% \n  filter(rows &gt;= 5) %&gt;% \n  ungroup() %&gt;% \n  group_by(game_id, game_half, passer_id) %&gt;% \n  summarize(cmp = mean(complete_pass),\n            mean_cpe = mean(cp, na.rm = TRUE),\n            mean_cpoe = mean(cpoe, na.rm = TRUE))\n\n\nQB_EPA &lt;- pbp_all %&gt;%\n  filter(!is.na(qb_epa),\n         !is.na(passer_id),\n         rush == 1 | pass == 1,\n         down &lt;= 4,\n         game_half != \"Overtime\"\n  ) %&gt;%\n  group_by(game_id,game_half, passer_id) %&gt;% \n  mutate(rows = n()) %&gt;% \n  filter(rows &gt;= 5) %&gt;% \n  ungroup() %&gt;% \n  group_by(game_id, passer_id,game_half, posteam, defteam, season, week, game_date) %&gt;% \n  summarize(tot_epa = sum(qb_epa),\n            mean_epa = mean(qb_epa)) \n\n\nlast_game &lt;- QB_EPA %&gt;% \n  filter(passer_id %in% passerID) %&gt;% \n  tail(2)\n\n\n\nall_epa_cpoe &lt;- QB_EPA %&gt;% \n  left_join(QB_CPOE) %&gt;% \n  filter(!is.na(cmp))\n\nggplot(all_epa_cpoe, aes(x=mean_cpoe, y=mean_epa))+\n  geom_hdr(method = \"mvnorm\")+\n  geom_vline(xintercept = 0, color = \"#F0F0F0\")+\n  geom_hline(yintercept = 0, color = \"#F0F0F0\")+\n  geom_vline(xintercept = 0, linetype = \"dashed\", color = \"#333333\")+\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"#333333\")+\n  #career\n  geom_point(data = all_epa_cpoe %&gt;% \n               filter(passer_id %in% passerID),\n             fill = \"#F0F0F0\",\n             color = \"black\",\n             shape = 21,\n             size=4,\n             alpha = 0.8)+\n  #text\n  geom_text_repel(data = all_epa_cpoe %&gt;% \n                    filter(passer_id %in% passerID),\n                  size = 5, \n                  box.padding = 1.2,\n                  min.segment.length = 0,\n                  segment.curvature = -0.1,\n                  segment.ncp = 3,\n                  #segment.angle = 20,\n                  segment.size = 0.8,\n                  force = 3,\n                  force_pull = 0.2,\n                  max.overlaps = Inf,\n                  #max.time = 5,max.iter = 1000000,\n                  lineheight = 0.8,\n                  bg.color = \"#fafafa\",\n                  aes(label = ifelse(game_id %in% last_game$game_id &\n                                       game_half == \"Half1\",\n                                     #glue::glue(\"1st Half\\nvs. {last_game$defteam}\"),\n                                     \"\",\n                                     ifelse(game_id %in% last_game$game_id &\n                                              game_half == \"Half2\",\n                                            glue::glue(\"2nd Half\\nSB LVII\"),\"\")))\n  )+\n  #text\n  geom_text_repel(data = all_epa_cpoe %&gt;% \n                    filter(passer_id %in% passerID),\n                  #x = -7, y = 0.75,\n                  xlim = -13,\n                  ylim = 0.6,\n                  size = 5, \n                  box.padding = 1.2,\n                  min.segment.length = 0,\n                  segment.curvature = 0.1,\n                  segment.ncp = 2,\n                  segment.angle = 30,\n                  segment.size = 0.8,\n                  force = 3,\n                  force_pull = 0.2,\n                  max.overlaps = Inf,\n                  #max.time = 5,max.iter = 1000000,\n                  lineheight = 0.8,\n                  bg.color = \"#fafafa\",\n                  aes(label = ifelse(game_id %in% last_game$game_id &\n                                       game_half == \"Half1\",\n                                     glue::glue(\"1st Half\\nSB LVII\"),\n                                     \"\"))\n  )+\n  #this season\n  geom_point(data = all_epa_cpoe %&gt;% \n               filter(passer_id %in% passerID &\n                        season == 2022),\n             aes(fill = posteam),\n             color = \"white\",\n             shape = 21,\n             size=4)+\n  #last game\n  geom_point(data = all_epa_cpoe %&gt;% \n               filter(passer_id %in% passerID &\n                        game_id %in% last_game$game_id),\n             aes(fill = posteam),\n             color = \"black\",\n             show.legend = FALSE,\n             shape = 21,\n             size=4,\n             stroke = 1.2)+\n  #annotate 1.5-1.5 -35-35\n  annotate(geom = \"text\",\n         x = 21, y = -1.17,\n         label = \"Passing accuracy\")+\n  annotate(geom = \"segment\",\n           size = 1,\n           x = 13, y = -1.25, xend = 30, yend = -1.25,\n           arrow = arrow(length = unit(0.5, \"cm\")),\n           lineend = \"round\",\n           linejoin = \"round\")+\n  annotate(geom = \"text\",\n           angle = 90,\n           x = -32.5, y = 0.85,\n           label = \"Scoring efficiency\")+\n  annotate(geom = \"segment\",\n           size = 1,\n           x = -34, y = 0.55, xend = -34, yend = 1.3,\n           arrow = arrow(length = unit(0.5, \"cm\")),\n           lineend = \"round\",\n           linejoin = \"round\")+\n  scale_fill_nfl()+\n  #scale_color_identity()+\n  guides(alpha = guide_legend(reverse = TRUE))+\n  labs(#title = glue::glue(\"EPA/play and CPOE in half games of {last_game$full_name}&lt;br&gt; career and &lt;span style='color:{last_game$team_color}'&gt;2022 season&lt;/span&gt;\"),\n      title = \"EPA/play and CPOE in half games of Patrick Mahomes&lt;br&gt;career and &lt;span style='color:#E31837'&gt;2022 season&lt;/span&gt;\", \n      subtitle = \"NFL QB games from 2006 to 2022 season\",\n       y = \"Expected Points Added per play (EPA/Play)\",\n       x = \"Completion % over expected (CPOE)\",\n       alpha = \"NFL QB games density\",\n       caption = \"Bruno Mioto @BrunoHMioto - Data: nflfastR\")+\n  theme_classic()+\n  theme(\n    text = element_text(family = \"Open Sans\"),\n    strip.text = element_text(face = \"bold\"),\n    axis.text = element_text(face = \"bold\"),\n    axis.title = element_text(face = \"bold\"),\n    axis.ticks = element_blank(),\n    axis.line = element_blank(),\n    plot.title = element_markdown(size = 20, face = \"bold\", color = \"#3c3c3c\"),\n    plot.subtitle = element_text(size = 12),\n    plot.title.position = \"plot\",\n    plot.margin = margin(15,15,15,15,\"pt\"),\n    legend.position = \"top\",\n    panel.grid.major = element_line(),\n    plot.background = element_rect(fill = \"#fafafa\"),\n    panel.background = element_rect(fill = \"#fafafa\"),\n    legend.background = element_rect(fill = \"#fafafa\"),\n  )+\n  coord_cartesian(ylim = c(-1.3, 1.3),\n                  xlim = c(-35, 35),\n                  clip = \"off\")\n\n\nggsave(filename = \"CPOE&EPA_P_Mahomes_SB_2022_2.png\",\n       #filename = glue::glue(\"CPOE&EPA_{last_game$full_name}_{last_game$game_id}_bengals_games.png\"),\n       width = 8,\n       height = 8)"
  },
  {
    "objectID": "charts.html",
    "href": "charts.html",
    "title": "Charts",
    "section": "",
    "text": "I make original charts on demand for presentations/scientific articles/publications\nI work as a freelancer here: Upwork (Top Rated Freelancer)\nMy contact email address is bhmstabile@gmail.com\nWant to support my work? ü•ß Buy me a Pie chart"
  },
  {
    "objectID": "charts.html#collaborations",
    "href": "charts.html#collaborations",
    "title": "Charts",
    "section": "Collaborations",
    "text": "Collaborations"
  },
  {
    "objectID": "charts.html#original-charts",
    "href": "charts.html#original-charts",
    "title": "Charts",
    "section": "Original charts",
    "text": "Original charts\nAll the following charts and maps were made entirely using ggplot2/R.You can click on each plot to see each detail.\n\n\n\n\nPlay animation made for BigDataBowl ‚Äô24 Competition\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n \n\n\n\n\n\n\n\n\n\n\n\nPlay animation made for BigDataBowl ‚Äô24 Competition"
  },
  {
    "objectID": "about-en.html",
    "href": "about-en.html",
    "title": "About me",
    "section": "",
    "text": "English  Portugu√™s\nHi, my name is Bruno Mioto, I‚Äôm a biologist, currently doing my PhD in Ecology of Inland Water Ecosystems (PEA-UEM) and I study fish phylogeography!\nI have experience with data analysis and chart creation, I love to create new R packages and work as a data visualization freelancer!\nSee my freelance profile here: Upwork\nAnd my portfolio here: Behance\nI always seek to bring the right information in a simpler way to society."
  },
  {
    "objectID": "about-en.html#education",
    "href": "about-en.html#education",
    "title": "About me",
    "section": "Education",
    "text": "Education\nGraduate Program in Ecology of Inland Water Ecosystems (PEA-UEM) | Maring√° - PRPhD | 2021 - Present\nGraduate Program in Ecology of Inland Water Ecosystems (PEA-UEM) | Maring√° - PRMaster‚Äôs Program | 2019 - 2021\nState University of Maring√° (UEM) | Maring√° - PRUndergraduate | 2015 - 2019"
  },
  {
    "objectID": "about-en.html#experience",
    "href": "about-en.html#experience",
    "title": "About me",
    "section": "Experience",
    "text": "Experience\nNupgen (DBC/Nup√©lia UEM) - Molecular Genetics LabPhD student | 2018 - Present\nGal√°pagos - Charts and MapsDirector of Graphics | 2022 - Present\nUpworkTop Rated Freelancer | 2022 - Present\nRenova√ß√£o Preparatory SchoolVolunteer Teacher - Biology | 2019 - Present"
  },
  {
    "objectID": "about-en.html#published-papers",
    "href": "about-en.html#published-papers",
    "title": "About me",
    "section": "Published papers",
    "text": "Published papers\nThe first record of Centrocestus formosanus (Trematoda: Heterophyidae) in southern Brazil supported by molecular data - 2021\nJuliana Rosa Matias Ciccheto, Bruno Henrique Mioto Stabile, Thomaz Mansini Carrenho Fabrin, Alessandra Val√©ria de Oliveira, Ricardo Massato Takemoto, Rodrigo Junio da Gra√ßa\nMolecular evidence of new freshwater turtle blood flukes (Digenea: Spirorchiidae) in the intermediate snail host Biomphalaria occidentalis Paraense, 1981 in an urban aquatic ecosystem in Brazil - 2021\nJuliana Rosa Matias Ciccheto, Bruno Henrique Mioto Stabile, F√°bio Fermino, Thomaz Mansini Carrenho Fabrin, Alessandra Val√©ria de Oliveira, Ricardo Massato Takemoto, Rodrigo Junio da Gra√ßa\nCyanobacteria in an urban lake: hidden diversity revealed by metabarcoding - 2020\nThomaz Mansini Carrenho Fabrin, Bruno Henrique Mioto Stabile, Matheus Vieira da Silva, Susicley Jati, Liliana Rodrigues, Alessandra Val√©ria de Oliveira\nDivulga√ß√£o da ci√™ncia desde a sala de aula - 2020\nYasmin Rodrigues de Souza, Carolina Pedrozo do Nascimento, Melissa Prog√™nio da Silva, Gabriela Cassia Zanon Reinas, Edilaine Corr√™a Leite, Jo√£o Ot√°vio Santos Silva, B√°rbara Scorsim Arjona, Rejane Guimar√£es Melo, Bruno Henrique Mioto Stabile, Hugo Lima Kirsten, Renan Borges dos Reis, Matheus Henrique Ferreira Aleixo, Larissa Carrara Gon√ßalves, Fernanda Moreira Flor√™ncio, Aline Favaro Mendes, Alessandra Barbosa da Silva, Alfonso Pineda, Luzia Cleide Rodrigues"
  }
]